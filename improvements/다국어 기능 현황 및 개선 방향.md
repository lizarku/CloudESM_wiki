# CloudESM_WEB 다국어(i18n) 기능 개선 

**작성일:** 2025-12-17
**목적:** 개발 사전 미팅용 의사결정 지원 문서
**기준 문서:** multilanguagesuport_result.md

---

## 목차

- [Part 1. 현재 상태 (AS-IS)](#part-1-현재-상태-as-is)
- [Part 2. 개발 방향 (WHY & WHAT)](#part-2-개발-방향-why--what)
- [Part 3. 개발 방법 (HOW)](#part-3-개발-방법-how)
- [Part 4. 작업 범위 및 일정](#part-4-작업-범위-및-일정)
- [부록. 의사결정 필요 사항](#부록-의사결정-필요-사항)

---

# Part 1. 현재 상태 (AS-IS)

> "지금 어떤 상황인가" - 기본버전/UEBA버전/기존 다국어버전 비교

## 1.1 버전별 현황 비교 (Overview)

### 1.1.1 전체 요약 비교

| 구분 | 기본버전 (Package) | UEBA버전 (Unpackage) | 기존 다국어버전 | 기본 vs 다국어 |
|------|-------------------|---------------------|-----------------|----------------|
| **하드코딩 전체** | 74,585건 | 48,194건 | 56,867건 | -17,718건 (-24%) |
| **화면 바인딩 (추정)** | ~40,000건 | ~27,000건 | ~32,000건 | -8,000건 (-20%) |
| **Properties 키** | 2,089건 | 2,609건 | 3,113건 | +1,024건 (+49%) |
| **i18n JS 키** | 1,889건 | 2,346건 | 2,921건 | +1,032건 (+55%) |
| **DB 바인딩 데이터** | ~1,200건 | ~1,200건 | ~1,200건 | 동일 |
| **총 다국어 대상** | ~79,763건 | ~54,900건 | ~64,101건 | -15,662건 (-20%) |

> **핵심 차이점:**
> - 기본버전(Package)은 소스 원본으로 하드코딩이 더 많음 (번들링 전)
> - UEBA버전(Unpackage)은 Properties/i18n 키가 더 많음 (버전 머지 후 배포본)
> - **기존 다국어버전**은 기본버전 대비 하드코딩 24% 감소, Properties/i18n 키 약 50% 증가
> - **버전 간 동기화 검토 필요** (977개 키 차이)

### 1.1.2 영역별 분포 비교

| 영역 | 기본버전 파일 수 | 기본버전 항목 | UEBA버전 파일 수 | UEBA버전 항목 | 기존 다국어버전 파일 수 | 기존 다국어버전 항목 |
|------|-----------------|--------------|-----------------|--------------|----------------------|---------------------|
| **Java** | 683개 | 28,116건 | 726개 | 17,355건 | ~2,700개 | 30,840건 |
| **JavaScript** | 1,002개 | 35,103건 | 586개 | 16,413건 | 1,532개 | 18,182건 |
| **JSP** | 555개 | 11,366건 | 805개 | 14,426건 | 708개 | 7,845건 |

> **특이점:** 
> - JavaScript는 기본버전이 2배 이상 많음 (번들링 전 소스 vs 번들 후)
> - 기존 다국어버전은 Java 파일 수가 많음 (전체 모듈 포함, 기본/UEBA는 web 모듈 중심)
> - 기존 다국어버전은 JSP 하드코딩이 기본버전 대비 31% 감소

### 1.1.3 주요 하드코딩 유형 (공통)

| 영역 | 하드코딩 유형 |
|------|-------------|
| **Java** | 에러/예외 메시지, 로그 메시지, Validation 메시지, 이메일 템플릿 |
| **JavaScript** | alert/confirm, 테이블 헤더, 버튼/라벨, placeholder, 차트 레이블, `.html()`, `.text()`, `.append()` 동적 삽입 |
| **JSP** | `<label>`, `<th>`, `<button>` 텍스트, `<option>` 항목, placeholder/title 속성 |

---

## 1.2 기본버전 (Package) 상세 현황

> 분석 대상: `C:\projects\eyeCloudXOAR_V4_package\0_package\`
> 분석 일시: 2025-12-17

### 1.2.1 전체 현황 요약

| 구분 | 파일/테이블 수 | 전체 항목 | 화면 바인딩 (추정) | 상태 |
|------|---------------|----------|-------------------|------|
| **하드코딩 텍스트** | 1,275개 파일 | 74,585건 | **~40,000건** | 다국어 미적용 |
| **기존 Properties** | 4개 파일 | 2,089건 | ~2,500건 | 98% 번역 완료 |
| **기존 i18n JS** | 4개 파일 | 1,889건 | ~2,000건 | 99% 번역 완료 |
| **DB 바인딩 데이터** | 8개 테이블 | ~1,200건 | ~1,200건 | 다국어 컬럼 없음 |
| **총 다국어 대상** | | **~79,763건** | **~45,700건** | |

> **핵심:** 로그, 주석 등 내부용 제외 시 **실제 작업 대상은 ~45,700건**

### 1.2.2 하드코딩 영역별 분포

| 영역 | 파일 수 | 한글 포함 파일 | 전체 항목 | 화면 바인딩 (추정) | 비고 |
|------|---------|--------------|----------|-------------------|------|
| **Java** | 683개 | 440개 | 28,116건 | ~8,000건 | 로그/주석 제외 |
| **JavaScript** | 1,002개 | 440개 | 35,103건 | ~20,000건 | console.log 제외 |
| **JSP** | 555개 | 395개 | 11,366건 | ~8,000건 | 주석 제외 |

**소스 구조:**

| 소스 경로 | 파일 유형 |
|----------|----------|
| `web/src/main/java/com/seculayer/web/` | Java 컨트롤러, 서비스 |
| `web/src/main/frontend/src/` | JavaScript 소스 |
| `web/src/main/webapp/WEB-INF/jsp/` | JSP 뷰 템플릿 |

### 1.2.3 기존 다국어 인프라 현황

**Properties 파일 (Backend)**

| 파일명 | 경로 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `messages_ko.properties` | `WEB-INF/messages/` | 652 | - |
| `messages_en.properties` | `WEB-INF/messages/` | 650 | 99.7% (2개 누락) |
| `resources_ko.properties` | `WEB-INF/messages/` | 1,437 | - |
| `resources_en.properties` | `WEB-INF/messages/` | 1,427 | 99.3% (10개 누락) |
| **합계** | | **2,089 (ko)** | **2,077 (en)** |

**i18n JS 파일 (Frontend)**

| 파일명 | 경로 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `sl.messages-ko.js` | `resources/js/i18n/` | 678 | - |
| `sl.messages-en.js` | `resources/js/i18n/` | 672 | 99.1% (6개 누락) |
| `sl.resources-ko.js` | `resources/js/i18n/` | 1,211 | - |
| `sl.resources-en.js` | `resources/js/i18n/` | 1,211 | 100% |
| **합계** | | **1,889 (ko)** | **1,883 (en)** |

---

## 1.3 UEBA버전 (Unpackage) 상세 현황

> 분석 대상: `/CloudESM/app/www/ROOT/`
> 분석 일시: 2025-12-17

### 1.3.1 전체 현황 요약

| 구분 | 파일/테이블 수 | 전체 항목 | 화면 바인딩 (필수) | 상태 |
|------|---------------|----------|-------------------|------|
| **하드코딩 텍스트** | 2,117개 파일 | 48,194건 | **~27,000건** | 다국어 미적용 |
| **기존 Properties** | 4개 파일 | 2,609건 | ~3,200건 | 98% 번역 완료 |
| **기존 i18n JS** | 4개 파일 | 2,346건 | ~1,800건 | 99% 번역 완료 |
| **DB 바인딩 데이터** | 8개 테이블 | ~1,200건 | ~1,200건 | 다국어 컬럼 없음 |
| **총 다국어 대상** | | **~54,900건** | **~33,200건** | |

> **핵심:** 로그, 주석 등 내부용 제외 시 **실제 작업 대상은 ~33,200건**

### 1.3.2 하드코딩 영역별 분포

| 영역 | 파일 수 | 전체 항목 | 화면 바인딩 (필수) | 비고 |
|------|---------|----------|-------------------|------|
| **Java** | 726개 | 17,355건 | ~5,000건 | 로그/주석 제외 |
| **JavaScript** | 586개 | 16,413건 | ~12,000건 | console.log 제외 |
| **JSP** | 805개 | 14,426건 | ~10,000건 | 주석 제외 |

### 1.3.3 기존 다국어 인프라 현황

**Properties 파일 (Backend)**

| 파일명 | 용도 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `messages_ko.properties` | 확인/에러 메시지 | 775 | - |
| `messages_en.properties` | 영어 메시지 | 773 | 99.7% (2개 누락) |
| `resources_ko.properties` | 버튼/라벨 리소스 | 1,834 | - |
| `resources_en.properties` | 영어 리소스 | 1,800 | 98.1% (34개 누락) |
| **합계** | | **2,609 (ko)** | **2,573 (en)** |

**i18n JS 파일 (Frontend)**

| 파일명 | 용도 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `sl.messages-ko.js` | 한국어 메시지 | 847 | - |
| `sl.messages-en.js` | 영어 메시지 | 840 | 99.2% (7개 누락) |
| `sl.resources-ko.js` | 한국어 리소스 | 1,499 | - |
| `sl.resources-en.js` | 영어 리소스 | 1,497 | 99.9% (2개 누락) |
| **합계** | | **2,346 (ko)** | **2,337 (en)** |

---

## 1.4 공통 문제점

### 1.4.1 Properties ↔ JS 중복

| 버전 | Properties (messages) | i18n JS (messages) | 중복 키 (추정) |
|------|----------------------|-------------------|---------------|
| 기본버전 | 652 | 678 | ~600개 (90%+) |
| UEBA버전 | 775 | 847 | **703개 (90%+)** |

**중복 키 샘플:**
```
CNF.ADB.0001, CNF.AUDIG.0001, CNF.BIG.0001, CNF.COM.0001, CNF.COM.0002, ...
ERR.COM.0001, ERR.COM.0002, ERR.COM.0003, ...
INF.COM.0001, INF.COM.0002, ...
```

**중복으로 인한 문제점:**

| 문제 | 영향 |
|------|------|
| **이중 관리 부담** | 동일 메시지를 두 곳에서 별도 관리 |
| **누락 위험** | 번역 업데이트 시 한쪽 수정 누락 가능 |
| **불일치 가능성** | 같은 키인데 다른 값이 들어갈 위험 |

### 1.4.2 DB 다국어 미지원

| 테이블명 | 현재 컬럼 | 다국어 컬럼 | 상태 |
|---------|----------|------------|------|
| `COM_CODE` | `code_name` (VARCHAR 256) | 없음 | 다국어 미지원 |
| `COM_MENU` | `menu_nm` (VARCHAR 60) | 없음 | 다국어 미지원 |
| `COM_USER_ROLE` | `role_nm` | 없음 | 다국어 미지원 |
| `MGR_EQP` | `eqp_nm` | 없음 | 다국어 미지원 |
| `MGR_ASSET` | `asset_nm` | 없음 | 다국어 미지원 |
| `NATION_LOCATION` | `nation_name` | 없음 | 다국어 미지원 |

### 1.4.3 버전 간 동기화 이슈

| 항목 | 기본버전 | UEBA버전 | 차이 | 조치 필요 |
|------|---------|---------|------|----------|
| Properties 키 | 2,089 | 2,609 | -520 | 동기화 검토 |
| i18n JS 키 | 1,889 | 2,346 | -457 | 동기화 검토 |
| **합계** | | | **-977** | **버전 머지 전 확인** |

> ⚠️ **주의:** 기본버전 소스가 UEBA버전 대비 키가 부족함. 다국어 작업 전 버전 동기화 필수.

### 1.4.4 기존 인프라 평가 (공통)

| 평가 항목 | 결과 | 상세 |
|----------|------|------|
| 지원 언어 | ✅ ko, en (2개) | 한/영 지원 |
| 번역 완성도 | ✅ 98%+ | 누락 45개 미만 |
| 번역 품질 | ✅ 양호 | 실제 영어로 번역됨 |
| 키 네이밍 규칙 | ⚠️ 모듈 기반 | CNF, ERR, BTN, LBL 등 → **새 규칙으로 재작성** |
| 파일 내 중복 | ✅ 없음 | 각 파일 내 중복 키 없음 |
| **Properties↔JS 중복** | ⚠️ **600~703개** | 동일 키 양쪽 관리 → **개선 필요** |

---

# Part 2. 개발 방향 (WHY & WHAT)

> "왜, 무엇을 해야 하는가"

## 2.1 다국어 적용 목표

| 목표 | 설명 |
|------|------|
| **하드코딩 제거** | ~27,000건 ~ 40,000건의 하드코딩 텍스트 다국어 전환 (버전에 따라 상이) |
| **관리 포인트 최소화** | 중복 제거로 3곳 관리로 단일화 |
| **다국어 지원** | 한국어(기본) + 영어, 러시아어 지원 |

---

## 2.2 아키텍처 선택: 하이브리드 방식 (파일 중심)

### 2.2.1 권장 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│  Backend (Java)         │  Frontend (JS)   │  DB (코드성)  │
│  ─────────────────────  │  ──────────────  │  ──────────  │
│  Properties 파일         │  JSON 파일        │  다국어 컬럼  │
│  messages_ko.properties │  messages.ko.json│  code_name   │
│  messages_en.properties │  messages.en.json│  code_name_en│
│  messages_ru.properties │  messages.ru.json│  code_name_ru│
└─────────────────────────────────────────────────────────────┘
```

### 2.2.2 하이브리드 방식 선택 이유

| 이유 | 설명 |
|------|------|
| **기존 인프라 활용** | Properties/i18n 파일에 98% 번역 완료 상태 |
| **초기 비용 낮음** | 신규 개발 최소화 (중복 정리 작업만 필요) |
| **Git 버전관리** | 파일 기반으로 변경 이력 명확히 추적 |
| **배포 단순** | 파일 교체만으로 배포 완료 |

### 2.2.3 방식별 비교

| 비교 항목 | 하이브리드 (파일) | 통합 (DB) |
|----------|-----------------|----------|
| 초기 설치 | 파일 복사 | SQL INSERT 필요 |
| 버전 관리 | Git 추적 용이 | DB 추적 어려움 |
| 롤백 | 이전 파일 복원 | 롤백 SQL 필요 |
| 관리 포인트 | 3곳 | 1곳 |
| 실시간 수정 | 서버 재시작 필요 | 즉시 반영 |
| **권장** | **✅ 권장** | ❌ 비권장 |

---

## 2.3 영역 분리 기준 (Java / JS / DB)

### 2.3.1 저장소별 분리 기준

| 저장소 | 대상 | 판단 기준 |
|--------|------|----------|
| **Properties (Java)** | 서버 전용 메시지 | Java 코드에서만 사용, 화면에 표시되지 않음 |
| **JSON (JS)** | UI 메시지 | 브라우저에서 직접 사용하는 모든 메시지 |
| **DB 컬럼** | 코드성 데이터 | 관리자가 화면에서 직접 수정하는 데이터 |

### 2.3.2 영역별 상세 기준

| 영역 | 포함 대상 | 제외 대상 |
|------|----------|----------|
| **Properties** | 이메일 템플릿, PDF/보고서 생성, 배치 작업 로그 | UI 라벨, alert 메시지 |
| **JSON** | alert/confirm, 테이블 헤더, 버튼/라벨, placeholder, 차트 레이블, `.html()`, `.text()`, `.append()` 동적 삽입, AJAX 응답 표시 | 서버 전용 메시지 |
| **DB** | COM_CODE(공통코드명), COM_MENU(메뉴명), 역할명, 장비명 등 | 고정 메시지 |

### 2.3.3 결정 플로우

```
Q1. 관리자가 화면에서 직접 수정하는 데이터인가?
    YES → DB 컬럼 (code_name_en 등)
    NO  → Q2로

Q2. 화면에 표시되는가? (alert, UI 라벨, AJAX 응답 등)
    YES → JSON 파일
    NO  → Q3로

Q3. Java 코드에서만 사용하는가? (이메일, PDF, 배치 로그 등)
    YES → Properties 파일
```

### 2.3.4 애매한 케이스 처리 기준

| 케이스 | 판단 | 저장소 | 이유 |
|--------|------|--------|------|
| AJAX API 에러 응답 | 화면에 표시됨 | **JSON** | 브라우저에서 alert 표시 |
| JSP Model → JS 전달 메시지 | 화면에 표시됨 | **JSON** | 최종 표시는 브라우저 |
| 서버/클라 양쪽 Validation | JS에서 처리 권장 | **JSON** | 중복 방지 |
| "저장", "취소" 공용 버튼 | UI 표시용 | **JSON** | 버튼 텍스트 |
| 이메일 본문 내용 | 서버에서만 사용 | **Properties** | 화면 미표시 |

### 2.3.5 분리하는 이유

| 이유 | 설명 |
|------|------|
| **기술적 최적화** | 각 영역에 가장 적합한 캐싱/로딩 방식 적용 |
| **성능** | 브라우저에서 서버 호출 없이 즉시 메시지 표시 (JSON 로컬 로드) |
| **관리 효율** | 서버 개발자는 Properties, 프론트 개발자는 JSON, DBA/운영자는 DB |
| **배포 독립성** | JS 메시지 수정 시 서버 재시작 불필요, DB 수정 시 배포 불필요 |
| **기존 인프라** | Spring MessageSource, 기존 i18n JS 파일 그대로 활용 |

---

## 2.4 안정적인 다국어 관리를 위한 선행 작업

### 2.4.1 필수 선행 작업

| 작업 | 내용 | 항목 수 |
|------|------|---------|
| **1** | Properties ↔ i18n JS 중복 키 제거 | 600~703개 |
| **2** | 영어 번역 누락 보완 | ~45개 |
| **3** | 기본버전 ↔ UEBA버전 동기화 | ~977개 키 |
| **4** | 관리 포인트 단일화 (역할 분리 기준 정의) | - |

### 2.4.2 선행 작업 미완료 시 리스크

```
⚠️ 경고: 선행 작업 미완료 시 6곳 관리 필요

현재 상태:
├── messages_ko.properties  ─┐
├── messages_en.properties   │ 중복
├── sl.messages-ko.js       ─┘
├── sl.messages-en.js
├── resources_ko.properties
├── resources_en.properties
├── sl.resources-ko.js
├── sl.resources-en.js
├── DB ko
└── DB en

→ 번역 업데이트 시 최대 10개 파일 수정 필요
→ 누락 위험 증가
→ 불일치 버그 발생 가능
```

### 2.4.3 중복 키 제거 절차 (작업 1)

```
1. 600~703개 중복 키 목록 추출
2. 각 키의 실제 사용처 분석 (Java only / JS only / Both)
3. 역할 분리 기준 적용
   - Backend 전용 (이메일 등): Properties에만 유지
   - Frontend 전용 (alert 등): i18n JS에만 유지
   - 공용: 한쪽 선택 후 다른쪽에서 제거
4. 중복 키 제거 및 코드 수정
5. 테스트 및 검증
```

---

# Part 3. 개발 방법 (HOW)

> "어떻게 하는가" - 규칙과 패턴

## 3.1 키 네이밍 표준

### 3.1.1 TYPE 정의 (5종류)

| TYPE | 의미 | 예시 키 | 예시 값 |
|------|------|---------|---------|
| `COM` | 단어 (버튼, 라벨) | `COM.SAVE` | "저장" |
| `Q` | 질문 (Question) | `Q.SAVE` | "저장하시겠습니까?" |
| `N` | 알림 (Notify) | `N.SAVE_OK` | "저장되었습니다." |
| `E` | 에러 (Error) | `E.NOT_FOUND` | "데이터를 찾을 수 없습니다." |
| `G` | 안내 (Guide) | `G.INPUT` | "값을 입력하세요." |

### 3.1.2 약어 표준

**동작 (Actions)**

| 한글 | 약어 | 한글 | 약어 | 한글 | 약어 |
|------|------|------|------|------|------|
| 등록 | REG | 수정 | MOD | 삭제 | DEL |
| 저장 | SAVE | 조회 | SRCH | 실행 | EXEC |
| 취소 | CNCL | 확인 | CNF | 적용 | APLY |

**공통 라벨 (Labels)**

| 한글 | 약어 | 한글 | 약어 | 한글 | 약어 |
|------|------|------|------|------|------|
| 이름 | NM | 코드 | CD | 설명 | DESC |
| 상태 | STAT | 일시 | DT | 전체 | ALL |

### 3.1.3 등록 원칙

| 원칙 | 설명 | 예시 |
|------|------|------|
| **완성형** | "사용자명" 전체를 등록 (런타임 조합 X) | ✅ `COM.USER_NM` = "사용자명" |
| **중복 금지** | 등록 전 기존 키 검색 필수 | 기존 키 재사용 권장 |
| **동시 등록** | 모든 언어 파일에 함께 등록 | ko, en, ru 동시에 추가 |

---

## 3.2 코드 변환 패턴 (AS-IS → TO-BE)

### 3.2.1 Java 변환 패턴

```java
// AS-IS (하드코딩)
throw new RuntimeException("입력값이 올바르지 않습니다.");

// TO-BE (다국어 적용)
@Autowired
private MessageService messageService;

throw new RuntimeException(messageService.get("E.INVALID"));
```

### 3.2.2 JavaScript 변환 패턴

```javascript
// AS-IS (하드코딩)
alert("저장하시겠습니까?");
var columns = [{ title: "이름", data: "name" }];

// TO-BE (다국어 적용)
alert(SL.i18n.get("Q.SAVE"));
var columns = [{ title: SL.i18n.get("COM.NM"), data: "name" }];
```

### 3.2.3 JSP 변환 패턴

```jsp
<%-- AS-IS (하드코딩) --%>
<button type="button">저장</button>
<th>이름</th>

<%-- TO-BE (다국어 적용) --%>
<button type="button"><spring:message code="COM.SAVE"/></button>
<th><spring:message code="COM.NM"/></th>
```

### 3.2.4 MyBatis Mapper 변환 패턴

```xml
<!-- AS-IS -->
<select id="selectComCodeList" resultType="map">
    SELECT code_type, code_id, code_name
    FROM COM_CODE
    WHERE code_type = #{code_type}
</select>

<!-- TO-BE -->
<select id="selectComCodeList" resultType="map">
    SELECT
        code_type,
        code_id,
        CASE
            WHEN #{lang} = 'en' AND code_name_en IS NOT NULL THEN code_name_en
            WHEN #{lang} = 'ru' AND code_name_ru IS NOT NULL THEN code_name_ru
            ELSE code_name
        END AS code_name
    FROM COM_CODE
    WHERE code_type = #{code_type}
</select>
```

---

## 3.3 품질 관리 규칙

### 3.3.1 코드 리뷰 체크리스트

| 항목 | 체크 내용 |
|------|----------|
| **키 네이밍** | TYPE 접두사 사용 (COM, Q, N, E, G) |
| **중복 검사** | 기존 키 재사용 여부 확인 |
| **동시 등록** | ko/en/ru 파일 모두 등록 여부 |
| **완성형** | 런타임 조합 대신 완성형 등록 여부 |

### 3.3.2 테스트 체크리스트

| 항목 | 체크 내용 |
|------|----------|
| **언어 전환** | ko ↔ en ↔ ru 전환 시 모든 텍스트 변경 확인 |
| **누락 확인** | 하드코딩 텍스트 잔존 여부 |
| **레이아웃** | 영어/러시아어 텍스트로 인한 UI 깨짐 여부 |

---

# Part 4. 작업 범위 및 일정

> "무엇을 얼마나"

## 4.1 Phase별 작업 상세

### 선행 조건: 버전 통합 (머지)

> **다국어 작업 시작 전 필수 완료 사항** (담당: 별도 지정)

| 작업 | 내용 | 비고 |
|------|------|------|
| **버전 머지** | 기본버전 + UEBA버전 통합 | 2개 버전 코드 병합 |
| **키 동기화** | Properties/i18n 키 차이 해소 | ~977개 키 |

```
⚠️ 주의: 버전 통합이 완료되어야 다국어 작업 시작 가능
- 기본버전(Package): 소스 원본
- UEBA버전(Unpackage): UEBA 기능 포함 배포본

→ 통합 후 단일 코드베이스에서 다국어 작업 진행
```

---

### Phase 0: 선행 작업 (필수)

| 작업 | 내용 | 항목 수 |
|------|------|---------|
| **1** | Properties ↔ i18n JS 중복 키 제거 | 600~703개 |
| **2** | 영어 번역 누락 보완 | ~45개 |
| **3** | 관리 포인트 단일화 | - |

> 상세 배경 및 리스크는 [2.4 안정적인 다국어 관리를 위한 선행 작업](#24-안정적인-다국어-관리를-위한-선행-작업) 참조

---

### Phase 1: 인프라 구축

| 작업 | 내용 |
|------|------|
| 1-1 | `COM_USER.lang_cd` 언어 설정 컬럼 추가 |
| 1-2 | Spring LocaleResolver 설정 |
| 1-3 | 로그인 시 Locale 세션 저장 |
| 1-4 | 언어 선택 UI 구현 |

**SQL 예시:**
```sql
ALTER TABLE COM_USER ADD COLUMN lang_cd VARCHAR(5) DEFAULT 'ko' COMMENT '언어코드';
```

---

### Phase 2: Backend 다국어 적용

| 버전 | 항목 수 | 비고 |
|------|---------|------|
| 기본버전 | ~8,000건 | 화면 바인딩 대상 |
| UEBA버전 | ~5,000건 | 화면 바인딩 대상 |

---

### Phase 3: Frontend 다국어 적용

| 버전 | JavaScript | JSP | 합계 |
|------|-----------|-----|------|
| 기본버전 | ~20,000건 | ~8,000건 | ~28,000건 |
| UEBA버전 | ~12,000건 | ~10,000건 | ~22,000건 |

---

### Phase 4: DB 코드 다국어 적용 (~1,200건)

**대상 테이블:**

| 테이블명 | 추가 컬럼 | 용도 |
|---------|----------|------|
| `COM_CODE` | `code_name_en`, `code_name_ru` | 공통코드명 |
| `COM_MENU` | `menu_nm_en`, `menu_nm_ru` | 메뉴명 |
| `COM_USER_ROLE` | `role_nm_en`, `role_nm_ru` | 역할명 |
| `MGR_EQP` | `eqp_nm_en`, `eqp_nm_ru` | 장비명 |
| `MGR_ASSET` | `asset_nm_en`, `asset_nm_ru` | 자산명 |
| `NATION_LOCATION` | `nation_name_en`, `nation_name_ru` | 국가명 |

**SQL 예시:**
```sql
ALTER TABLE COM_CODE
ADD COLUMN code_name_en VARCHAR(100) AFTER code_name COMMENT '코드명(영문)',
ADD COLUMN code_name_ru VARCHAR(100) AFTER code_name_en COMMENT '코드명(러시아어)';
```

---

### Phase 5: 번역 작업 (추정 ~3,000건 ~ 5,000건)

**번역 대상:**
- 신규 메시지 영어 번역
- 신규 메시지 러시아어 번역
- DB 코드성 데이터 번역
- 외부 번역 업체 협업 가능

**산출 근거:**
```
하드코딩 발생 건수: ~27,000건 ~ 40,000건 (버전에 따라 상이)
   ↓
중복 제거 (동일 텍스트 다수 발생)
예: "저장", "취소", "조회" 등 반복 사용
추정 중복률: 80~90%
   ↓
순수 유니크 메시지: ~2,700건 ~ 5,400건
   ↓
기존 키로 커버 가능: ~500건 (추정)
   ↓
신규 번역 필요: ~2,200건 ~ 4,900건
   + DB 코드 데이터: ~1,200건
   ─────────────────────────
   총 추정: ~3,400건 ~ 6,100건

※ 정확한 건수는 Phase 2~3 키 추출 후 확정
```

---

### Phase 6: 테스트 및 검증

| 테스트 항목 | 내용 | 비고 |
|------------|------|------|
| **언어 전환** | ko ↔ en ↔ ru 전환 시 모든 텍스트 정상 표시 | 전 화면 대상 |
| **누락 확인** | 하드코딩 텍스트 잔존 여부 점검 | Grep 스크립트 활용 |
| **키 매핑** | 존재하지 않는 키 호출 시 fallback 동작 | 에러 로그 확인 |
| **레이아웃 점검** | 영어/러시아어 텍스트 UI 깨짐 여부 | 주요 화면 중심 |
| **기능 테스트** | 다국어 적용 후 기존 기능 정상 동작 | 회귀 테스트 |

---

### 후행 작업: UI 레이아웃 업데이트

> **다국어 적용 완료 후 진행** (별도 일정 협의 필요)

| 작업 | 내용 | 비고 |
|------|------|------|
| **UI 크기 조정** | DOM element들의 다국어 길이 대응 | 영어 기준 1차 Set |

```
📋 작업 내용:
- 다국어 텍스트 길이에 맞는 UI 컴포넌트 크기 조정
- 버튼, 라벨, 테이블 헤더 등 레이아웃 재구성
- 기준: 영어 (가장 긴 텍스트 기준)

📌 진행 방식:
- 다국어 작업 완료 후 별도 논의
- UI 검토 후 일정 재수립
- 영어 UI 기준으로 1차 레이아웃 확정
```

---

## 4.2 총 작업량 요약 (버전별)

| Phase | 작업 | 기본버전 | UEBA버전 | 담당 |
|-------|------|---------|---------|------|
| **선행 조건** | 버전 통합 | 2개 버전 머지 | - | 별도 지정 |
| **Phase 0** | 선행 작업 | ~750건 | ~750건 | 다국어 개발 |
| **Phase 1** | 인프라 구축 | 설정 작업 | 설정 작업 | 다국어 개발 |
| **Phase 2** | Java 하드코딩 제거 | ~8,000건 | ~5,000건 | 다국어 개발 |
| **Phase 3** | JS/JSP 하드코딩 제거 | ~28,000건 | ~22,000건 | 다국어 개발 |
| **Phase 4** | DB 스키마/Mapper 수정 | 8개 테이블 | 8개 테이블 | 다국어 개발 |
| **Phase 5** | 번역 (영어 + 러시아어) | ~3,000~5,000건 × 2 | ~3,000~5,000건 × 2 | 번역 담당 |
| **Phase 6** | 테스트 및 검증 | 전체 화면 | 전체 화면 | QA/개발팀 |
| **후행 작업** | UI 레이아웃 업데이트 | 별도 산정 | 별도 산정 | 별도 논의 |
| **총계** | | **~40,000건 + α** | **~32,000건 + α** | |

---

## 4.3 진행 순서

```
[선행 조건] 버전 통합 완료 (기본버전 + UEBA버전 머지)
   ↓
Phase 0 완료 (중복 제거 필수!)
   ↓
Phase 1 인프라 구축 + 키 네이밍 표준 확정
   ↓
   ┌─────────────────────────────────────┐
   │  [개발 Track]     [번역 Track]       │
   │       ↓               ↓             │
   │  Phase 2~3        Phase 5           │
   │  (코드 수정)       (번역 작업)        │
   │       ↓               ↓             │
   │  Phase 4          번역 완료          │
   │  (DB 작업)                          │
   └─────────────────────────────────────┘
   ↓ (양쪽 완료 후)
Phase 6 테스트 및 검증
   ↓
[후행 작업] UI 레이아웃 업데이트 (별도 논의 후 일정 확정)
```

---

# 부록. 의사결정 필요 사항

> 사전 미팅에서 합의가 필요한 항목

## A.1 필수 의사결정 항목

| 항목 | 선택지 | 권장 | 비고 |
|------|--------|------|------|
| **버전 통합 일정** | 다국어 작업 전 완료 | **필수** | 기본/UEBA 머지 |
| **대상 버전 선택** | 기본버전 / UEBA버전 / 통합 | **통합** | 단일 코드베이스 권장 |
| **중복제거 선행 여부** | 선행 / 생략 | **선행** | 생략 시 6곳 관리 |
| **아키텍처 선택** | 하이브리드 / DB 통합 | **하이브리드** | 기존 인프라 98% 활용 |
| **번역 방식** | 내부 / 외주 | 상황에 따름 | ~3,000~5,000건 × 2언어 |
| **UI 업데이트 일정** | 다국어 완료 후 논의 | **후행** | 영어 기준 레이아웃 |

## A.2 우선순위 결정 필요

| 모듈 | 기본버전 | UEBA버전 | 제안 우선순위 |
|------|---------|---------|--------------|
| SOAR | ~8,500건 | ~8,500건 | 1순위 |
| UEBA | - | ~7,300건 | 1순위 (UEBA만) |
| Monitoring | ~3,900건 | ~3,900건 | 2순위 |
| Dashboard | ~2,600건 | ~2,600건 | 2순위 |
| System | ~2,500건 | ~2,500건 | 3순위 |

## A.3 리스크 공유

| 리스크 | 영향 | 대응 방안 |
|--------|------|----------|
| 버전 통합 지연 | 다국어 작업 시작 불가 | 버전 머지 일정 사전 확정 |
| 버전 간 키 차이 | 일부 메시지 누락 | 동기화 작업 선행 (977개) |
| 중복제거 생략 | 관리 포인트 2배 증가 | 중복제거 필수 진행 |
| 번역 품질 | 사용자 경험 저하 | 네이티브 검수 또는 전문 업체 |
| 일정 지연 | Phase 간 의존성 | Phase 2~3 병렬화로 단축 |
| UI 레이아웃 미대응 | 텍스트 잘림/깨짐 | 영어 기준 UI 재설계 (후행) |

---

## 참고 문서

- `docs/multilanguagesuport_result.md` - 상세 분석 문서
- `docs/multilanguagesuport.md` - 초기 분석 문서

---

## 버전 이력

| 버전 | 일자 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-17 | 초안 작성 (UEBA버전 기준) |
| 1.1 | 2025-12-17 | 기본버전/UEBA버전 비교 구조로 개선 |
| 1.2 | 2025-12-18 | 기존 다국어버전 현황 추가 (3개 버전 비교) |
