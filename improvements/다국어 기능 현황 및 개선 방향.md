# CloudESM_WEB 다국어(i18n) 기능 개선 

**작성일:** 2025-12-17
**목적:** 개발 사전 미팅용 의사결정 지원 문서
**기준 문서:** multilanguagesuport_result.md

---

## 목차

- [Part 1. 현재 상태 (AS-IS)](#part-1-현재-상태-as-is)
- [Part 2. 개발 방향 (WHY & WHAT)](#part-2-개발-방향-why--what)
- [Part 3. 개발 방법 (HOW)](#part-3-개발-방법-how)
- [Part 4. 작업 범위 및 일정](#part-4-작업-범위-및-일정)
- [부록. 의사결정 필요 사항](#부록-의사결정-필요-사항)

---

# Part 1. 현재 상태 (AS-IS)

> "지금 어떤 상황인가" - 기본버전/UEBA버전/기존 다국어버전 비교

## 1.1 버전별 현황 비교 (Overview)

### 1.1.1 전체 요약 비교

| 구분 | 기본버전 (Package) | UEBA버전 (Unpackage) | 기존 다국어버전 | 기본 vs 다국어 |
|------|-------------------|---------------------|-----------------|----------------|
| **하드코딩 전체** | 74,585건 | 48,194건 | 56,867건 | -17,718건 (-24%) |
| **화면 바인딩 (추정)** | ~40,000건 | ~27,000건 | ~32,000건 | -8,000건 (-20%) |
| **Properties 키** | 2,089건 | 2,609건 | 3,113건 | +1,024건 (+49%) |
| **i18n JS 키** | 1,889건 | 2,346건 | 2,921건 | +1,032건 (+55%) |
| **DB 바인딩 데이터** | ~1,200건 | ~1,200건 | ~1,200건 | 동일 |
| **총 다국어 대상** | ~79,763건 | ~54,350건 | ~64,101건 | -15,662건 (-20%) |

> **핵심 차이점:**
> - 기본버전(Package)은 소스 원본으로 하드코딩이 더 많음 (번들링 전)
> - UEBA버전(Unpackage)은 Properties/i18n 키가 더 많음 (버전 머지 후 배포본)
> - **기존 다국어버전**은 기본버전 대비 하드코딩 24% 감소, Properties/i18n 키 약 50% 증가
> - **버전 간 동기화 검토 필요** (977개 키 차이)

### 1.1.2 영역별 분포 비교

| 영역 | 기본버전 파일 수 | 기본버전 항목 | UEBA버전 파일 수 | UEBA버전 항목 | 기존 다국어버전 파일 수 | 기존 다국어버전 항목 |
|------|-----------------|--------------|-----------------|--------------|----------------------|---------------------|
| **Java** | 683개 | 28,247건 | 726개 | 17,355건 | ~2,700개 | 30,840건 |
| **JavaScript** | 1,002개 | 35,103건 | 586개 | 16,413건 | 1,532개 | 18,182건 |
| **JSP** | 555개 | 11,366건 | 805개 | 14,426건 | 708개 | 7,845건 |

> **특이점:** 
> - JavaScript는 기본버전이 2배 이상 많음 (번들링 전 소스 vs 번들 후)
> - 기존 다국어버전은 Java 파일 수가 많음 (전체 모듈 포함, 기본/UEBA는 web 모듈 중심)
> - 기존 다국어버전은 JSP 하드코딩이 기본버전 대비 31% 감소

### 1.1.3 주요 하드코딩 유형 (공통)

| 영역 | 하드코딩 유형 |
|------|-------------|
| **Java** | 에러/예외 메시지, 로그 메시지, Validation 메시지, 이메일 템플릿 |
| **JavaScript** | alert/confirm, 테이블 헤더, 버튼/라벨, placeholder, 차트 레이블, `.html()`, `.text()`, `.append()` 동적 삽입 |
| **JSP** | `<label>`, `<th>`, `<button>` 텍스트, `<option>` 항목, placeholder/title 속성 |

---

## 1.2 기본버전 (Package) 상세 현황

> 분석 대상: `C:\projects\eyeCloudXOAR_V4_package\0_package\`
> 분석 일시: 2025-12-17

### 1.2.1 전체 현황 요약

| 구분 | 파일/테이블 수 | 전체 항목 | 화면 바인딩 (추정) | 상태 |
|------|---------------|----------|-------------------|------|
| **하드코딩 텍스트** | 1,275개 파일 | 74,585건 | **~40,000건** | 다국어 미적용 |
| **기존 Properties** | 4개 파일 | 2,089건 | ~2,500건 | 98% 번역 완료 |
| **기존 i18n JS** | 4개 파일 | 1,889건 | ~2,000건 | 99% 번역 완료 |
| **DB 바인딩 데이터** | 6개 테이블 | ~1,200건 | ~1,200건 | 다국어 컬럼 없음 |
| **총 다국어 대상** | | **~79,763건** | **~45,700건** | |

> **핵심:** 로그, 주석 등 내부용 제외 시 **실제 작업 대상은 ~45,700건**

#### 모듈별 다국어 현황 요약

**전체 모듈 현황 (Java 기준)**

| 모듈 | Java 파일 | 한글 항목 | 다국어 대상 | 비고 |
|------|----------|----------|------------|------|
| **web** | 683개 | 28,247건 | ✅ 대상 | 메인 웹 애플리케이션 |
| **analyzer** | 143개 | 3,537건 | ✅ 대상 | 실시간/배치 분석 |
| **soar_analyzer** | 60개 | 3,282건 | ✅ 대상 | AI/ML SOAR 분석 |
| **analyzer-assistant** | 84개 | 1,224건 | ✅ 대상 | Analyzer 보조 |
| agent | 203개 | 771건 | ⚪ 제외 | 데이터 수집 (백엔드) |
| datamanager | 81개 | 628건 | ⚪ 제외 | 마스터 데이터 관리 |
| visualization | 94개 | 581건 | ⚪ 제외 | 시각화 도구 (SWT) |
| pms | 32개 | 451건 | ⚪ 제외 | 패키지 관리 |
| parser-tailer | 93개 | 420건 | ⚪ 제외 | 로그 파서 (SWT) |
| nomalizer | 91개 | 362건 | ⚪ 제외 | 로그 정규화 |
| procmonitor | 41개 | 344건 | ⚪ 제외 | 프로세스 모니터 |
| netflow | 58개 | 227건 | ⚪ 제외 | 네트워크 플로우 |
| reducer | 22개 | 144건 | ⚪ 제외 | 데이터 축소 |
| integrity | 4개 | 39건 | ⚪ 제외 | 무결성 검증 |
| launcher | 11개 | 31건 | ⚪ 제외 | 데스크톱 런처 |
| common | 34개 | 26건 | ⚪ 제외 | 공유 유틸리티 |
| 기타 8개 모듈 | 225개 | 13건 | ⚪ 제외 | collector, proxy 등 |
| **합계** | **1,959개** | **40,327건** | | |

> **참고:** JS/JSP는 모두 web 모듈에 포함

**다국어 대상 vs 제외 모듈 비교**

| 구분 | Java 파일 | 한글 항목 | 비율 |
|------|----------|----------|------|
| **다국어 대상** (web, analyzer, soar_analyzer, analyzer-assistant) | 970개 | 36,290건 | **90%** |
| **제외** (agent, datamanager, nomalizer 등 백엔드) | 989개 | 4,037건 | 10% |
| **전체** | 1,959개 | 40,327건 | 100% |

> **결론:** 
> - 다국어 작업은 **web + analyzer 계열 4개 모듈**에 집중
> - 백엔드 전용 모듈(agent, nomalizer 등)은 UI가 없어 다국어 제외
> - 대상 모듈에 집중 시 전체 Java 한글 항목의 **90%를 커버** (36,290건)

### 1.2.2 하드코딩 영역별 분포

| 영역 | 파일 수 | 한글 포함 파일 | 전체 항목 | 화면 바인딩 (추정) | 비고 |
|------|---------|--------------|----------|-------------------|------|
| **Java** | 683개 | 440개 | 28,247건 | ~8,000건 | 로그/주석 제외 |
| **JavaScript** | 1,002개 | 440개 | 35,103건 | ~20,000건 | console.log 제외 |
| **JSP** | 555개 | 395개 | 11,366건 | ~8,000건 | 주석 제외 |

**소스 구조:**

| 소스 경로 | 파일 유형 |
|----------|----------|
| `web/src/main/java/com/seculayer/web/` | Java 컨트롤러, 서비스 |
| `web/src/main/frontend/src/` | JavaScript 소스 |
| `web/src/main/webapp/WEB-INF/jsp/` | JSP 뷰 템플릿 |

### 1.2.3 기존 다국어 인프라 현황

**Properties 파일 (Backend)**

| 파일명 | 경로 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `messages_ko.properties` | `WEB-INF/messages/` | 652 | - |
| `messages_en.properties` | `WEB-INF/messages/` | 650 | 99.7% (2개 누락) |
| `resources_ko.properties` | `WEB-INF/messages/` | 1,437 | - |
| `resources_en.properties` | `WEB-INF/messages/` | 1,427 | 99.3% (10개 누락) |
| **합계** | | **2,089 (ko)** | **2,077 (en)** |

**i18n JS 파일 (Frontend)**

| 파일명 | 경로 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `sl.messages-ko.js` | `resources/js/i18n/` | 678 | - |
| `sl.messages-en.js` | `resources/js/i18n/` | 672 | 99.1% (6개 누락) |
| `sl.resources-ko.js` | `resources/js/i18n/` | 1,211 | - |
| `sl.resources-en.js` | `resources/js/i18n/` | 1,211 | 100% |
| **합계** | | **1,889 (ko)** | **1,883 (en)** |

---

## 1.3 UEBA버전 (Unpackage) 상세 현황

> 분석 대상: `/CloudESM/app/www/ROOT/`
> 분석 일시: 2025-12-17

### 1.3.1 전체 현황 요약

| 구분 | 파일/테이블 수 | 전체 항목 | 화면 바인딩 (필수) | 상태 |
|------|---------------|----------|-------------------|------|
| **하드코딩 텍스트** | 2,117개 파일 | 48,194건 | **~27,000건** | 다국어 미적용 |
| **기존 Properties** | 4개 파일 | 2,609건 | ~3,200건 | 98% 번역 완료 |
| **기존 i18n JS** | 4개 파일 | 2,346건 | ~1,800건 | 99% 번역 완료 |
| **DB 바인딩 데이터** | 6개 테이블 | ~1,200건 | ~1,200건 | 다국어 컬럼 없음 |
| **총 다국어 대상** | | **~54,350건** | **~33,200건** | |

> **핵심:** 로그, 주석 등 내부용 제외 시 **실제 작업 대상은 ~33,200건**

### 1.3.2 하드코딩 영역별 분포

| 영역 | 파일 수 | 전체 항목 | 화면 바인딩 (필수) | 비고 |
|------|---------|----------|-------------------|------|
| **Java** | 726개 | 17,355건 | ~5,000건 | 로그/주석 제외 |
| **JavaScript** | 586개 | 16,413건 | ~12,000건 | console.log 제외 |
| **JSP** | 805개 | 14,426건 | ~10,000건 | 주석 제외 |

### 1.3.3 기존 다국어 인프라 현황

**Properties 파일 (Backend)**

| 파일명 | 용도 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `messages_ko.properties` | 확인/에러 메시지 | 775 | - |
| `messages_en.properties` | 영어 메시지 | 773 | 99.7% (2개 누락) |
| `resources_ko.properties` | 버튼/라벨 리소스 | 1,834 | - |
| `resources_en.properties` | 영어 리소스 | 1,800 | 98.1% (34개 누락) |
| **합계** | | **2,609 (ko)** | **2,573 (en)** |

**i18n JS 파일 (Frontend)**

| 파일명 | 용도 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `sl.messages-ko.js` | 한국어 메시지 | 847 | - |
| `sl.messages-en.js` | 영어 메시지 | 840 | 99.2% (7개 누락) |
| `sl.resources-ko.js` | 한국어 리소스 | 1,499 | - |
| `sl.resources-en.js` | 영어 리소스 | 1,497 | 99.9% (2개 누락) |
| **합계** | | **2,346 (ko)** | **2,337 (en)** |

---

## 1.4 공통 문제점

### 1.4.1 Properties ↔ JS 중복

| 버전 | Properties (messages) | i18n JS (messages) | 중복 키 (추정) |
|------|----------------------|-------------------|---------------|
| 기본버전 | 652 | 678 | ~600개 (90%+) |
| UEBA버전 | 775 | 847 | **703개 (90%+)** |

**중복 키 샘플:**
```
CNF.ADB.0001, CNF.AUDIG.0001, CNF.BIG.0001, CNF.COM.0001, CNF.COM.0002, ...
ERR.COM.0001, ERR.COM.0002, ERR.COM.0003, ...
INF.COM.0001, INF.COM.0002, ...
```

**중복으로 인한 문제점:**

| 문제 | 영향 |
|------|------|
| **이중 관리 부담** | 동일 메시지를 두 곳에서 별도 관리 |
| **누락 위험** | 번역 업데이트 시 한쪽 수정 누락 가능 |
| **불일치 가능성** | 같은 키인데 다른 값이 들어갈 위험 |

### 1.4.2 DB 다국어 미지원

| 테이블명 | 현재 컬럼 | 다국어 컬럼 | 상태 |
|---------|----------|------------|------|
| `COM_CODE` | `code_name` (VARCHAR 256) | 없음 | 다국어 미지원 |
| `COM_MENU` | `menu_nm` (VARCHAR 60) | 없음 | 다국어 미지원 |
| `COM_USER_ROLE` | `role_nm` | 없음 | 다국어 미지원 |
| `MGR_EQP` | `eqp_nm` | 없음 | 다국어 미지원 |
| `MGR_ASSET` | `asset_nm` | 없음 | 다국어 미지원 |
| `NATION_LOCATION` | `nation_name` | 없음 | 다국어 미지원 |

### 1.4.3 버전 간 동기화 이슈

| 항목 | 기본버전 | UEBA버전 | 차이 | 조치 필요 |
|------|---------|---------|------|----------|
| Properties 키 | 2,089 | 2,609 | -520 | 동기화 검토 |
| i18n JS 키 | 1,889 | 2,346 | -457 | 동기화 검토 |
| **합계** | | | **-977** | **버전 머지 전 확인** |

> ⚠️ **주의:** 기본버전 소스가 UEBA버전 대비 키가 부족함. 다국어 작업 전 버전 동기화 필수.

### 1.4.4 기존 인프라 평가 (공통)

| 평가 항목 | 결과 | 상세 |
|----------|------|------|
| 지원 언어 | ✅ ko, en (2개) | 한/영 지원 |
| 번역 완성도 | ✅ 98%+ | 누락 45개 미만 |
| 번역 품질 | ✅ 양호 | 실제 영어로 번역됨 |
| 키 네이밍 규칙 | ⚠️ 모듈 기반 | CNF, ERR, BTN, LBL 등 → **새 규칙으로 재작성** |
| 파일 내 중복 | ✅ 없음 | 각 파일 내 중복 키 없음 |
| **Properties↔JS 중복** | ⚠️ **600~703개** | 동일 키 양쪽 관리 → **개선 필요** |

---

# Part 2. 개발 방향 (WHY & WHAT)

> "왜, 무엇을 해야 하는가"

## 2.1 다국어 적용 목표

| 목표 | 설명 |
|------|------|
| **하드코딩 제거** | ~27,000건 ~ 40,000건의 하드코딩 텍스트 다국어 전환 (버전에 따라 상이) |
| **관리 포인트 최소화** | 중복 제거로 3곳 관리로 단일화 |
| **다국어 지원** | 한국어(기본) + 영어, 러시아어 지원 |

---

## 2.2 아키텍처 선택: 하이브리드 방식 (파일 중심)

### 2.2.1 권장 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│  Backend (Java)         │  Frontend (JS)   │  DB (코드성)  │
│  ─────────────────────  │  ──────────────  │  ──────────  │
│  Properties 파일         │  JSON 파일        │  다국어 컬럼  │
│  messages_ko.properties │  messages.ko.json│  code_name   │
│  messages_en.properties │  messages.en.json│  code_name_en│
│  messages_ru.properties │  messages.ru.json│  code_name_ru│
└─────────────────────────────────────────────────────────────┘
```

### 2.2.2 하이브리드 방식 선택 이유

| 이유 | 설명 |
|------|------|
| **기존 인프라 활용** | Properties/i18n 파일에 98% 번역 완료 상태 |
| **초기 비용 낮음** | 신규 개발 최소화 (중복 정리 작업만 필요) |
| **Git 버전관리** | 파일 기반으로 변경 이력 명확히 추적 |
| **배포 단순** | 파일 교체만으로 배포 완료 |

### 2.2.3 방식별 비교

| 비교 항목 | 하이브리드 (파일) | 통합 (DB) |
|----------|-----------------|----------|
| 초기 설치 | 파일 복사 | SQL INSERT 필요 |
| 버전 관리 | Git 추적 용이 | DB 추적 어려움 |
| 롤백 | 이전 파일 복원 | 롤백 SQL 필요 |
| 관리 포인트 | 3곳 | 1곳 |
| 실시간 수정 | 서버 재시작 필요 | 즉시 반영 |
| **권장** | **✅ 권장** | ❌ 비권장 |

---

## 2.3 영역 분리 기준 (Java / JS / DB)

### 2.3.1 저장소별 분리 기준

| 저장소 | 대상 | 판단 기준 |
|--------|------|----------|
| **Properties (Java)** | 서버 전용 메시지 | Java 코드에서만 사용, 화면에 표시되지 않음 |
| **JSON (JS)** | UI 메시지 | 브라우저에서 직접 사용하는 모든 메시지 |
| **DB 컬럼** | 코드성 데이터 | 관리자가 화면에서 직접 수정하는 데이터 |

### 2.3.2 영역별 상세 기준

| 영역 | 포함 대상 | 제외 대상 |
|------|----------|----------|
| **Properties** | 이메일 템플릿, PDF/보고서 생성, 배치 작업 로그 | UI 라벨, alert 메시지 |
| **JSON** | alert/confirm, 테이블 헤더, 버튼/라벨, placeholder, 차트 레이블, `.html()`, `.text()`, `.append()` 동적 삽입, AJAX 응답 표시 | 서버 전용 메시지 |
| **DB** | COM_CODE(공통코드명), COM_MENU(메뉴명), 역할명, 장비명 등 | 고정 메시지 |

### 2.3.3 결정 플로우

```
Q1. 관리자가 화면에서 직접 수정하는 데이터인가?
    YES → DB 컬럼 (code_name_en 등)
    NO  → Q2로

Q2. 화면에 표시되는가? (alert, UI 라벨, AJAX 응답 등)
    YES → JSON 파일
    NO  → Q3로

Q3. Java 코드에서만 사용하는가? (이메일, PDF, 배치 로그 등)
    YES → Properties 파일
```

### 2.3.4 애매한 케이스 처리 기준

| 케이스 | 판단 | 저장소 | 이유 |
|--------|------|--------|------|
| AJAX API 에러 응답 | 화면에 표시됨 | **JSON** | 브라우저에서 alert 표시 |
| JSP Model → JS 전달 메시지 | 화면에 표시됨 | **JSON** | 최종 표시는 브라우저 |
| 서버/클라 양쪽 Validation | JS에서 처리 권장 | **JSON** | 중복 방지 |
| "저장", "취소" 공용 버튼 | UI 표시용 | **JSON** | 버튼 텍스트 |
| 이메일 본문 내용 | 서버에서만 사용 | **Properties** | 화면 미표시 |

### 2.3.5 분리하는 이유

| 이유 | 설명 |
|------|------|
| **기술적 최적화** | 각 영역에 가장 적합한 캐싱/로딩 방식 적용 |
| **성능** | 브라우저에서 서버 호출 없이 즉시 메시지 표시 (JSON 로컬 로드) |
| **관리 효율** | 서버 개발자는 Properties, 프론트 개발자는 JSON, DBA/운영자는 DB |
| **배포 독립성** | JS 메시지 수정 시 서버 재시작 불필요, DB 수정 시 배포 불필요 |
| **기존 인프라** | Spring MessageSource, 기존 i18n JS 파일 그대로 활용 |

---

## 2.4 안정적인 다국어 관리를 위한 선행 작업

### 2.4.1 필수 선행 작업

| 작업 | 내용 | 항목 수 |
|------|------|---------|
| **1** | Properties ↔ i18n JS 중복 키 제거 | 600~703개 |
| **2** | 영어 번역 누락 보완 | ~45개 |
| **3** | 기본버전 ↔ UEBA버전 동기화 | ~977개 키 |
| **4** | 관리 포인트 단일화 (역할 분리 기준 정의) | - |

### 2.4.2 선행 작업 미완료 시 리스크

```
⚠️ 경고: 선행 작업 미완료 시 6곳 관리 필요

현재 상태:
├── messages_ko.properties  ─┐
├── messages_en.properties   │ 중복
├── sl.messages-ko.js       ─┘
├── sl.messages-en.js
├── resources_ko.properties
├── resources_en.properties
├── sl.resources-ko.js
├── sl.resources-en.js
├── DB ko
└── DB en

→ 번역 업데이트 시 최대 10개 파일 수정 필요
→ 누락 위험 증가
→ 불일치 버그 발생 가능
```

### 2.4.3 중복 키 제거 절차 (작업 1)

```
1. 600~703개 중복 키 목록 추출
2. 각 키의 실제 사용처 분석 (Java only / JS only / Both)
3. 역할 분리 기준 적용
   - Backend 전용 (이메일 등): Properties에만 유지
   - Frontend 전용 (alert 등): i18n JS에만 유지
   - 공용: 한쪽 선택 후 다른쪽에서 제거
4. 중복 키 제거 및 코드 수정
5. 테스트 및 검증
```

---

# Part 3. 개발 방법 (HOW)

> "어떻게 하는가" - 규칙과 패턴

## 3.1 키 네이밍 표준

### 3.1.1 TYPE 정의 (5종류)

| TYPE | 의미 | 예시 키 | 예시 값 |
|------|------|---------|---------|
| `COM` | 단어 (버튼, 라벨) | `COM.SAVE` | "저장" |
| `Q` | 질문 (Question) | `Q.SAVE` | "저장하시겠습니까?" |
| `N` | 알림 (Notify) | `N.SAVE_OK` | "저장되었습니다." |
| `E` | 에러 (Error) | `E.NOT_FOUND` | "데이터를 찾을 수 없습니다." |
| `G` | 안내 (Guide) | `G.INPUT` | "값을 입력하세요." |

### 3.1.2 약어 표준

**동작 (Actions)**

| 한글 | 약어 | 한글 | 약어 | 한글 | 약어 |
|------|------|------|------|------|------|
| 등록 | REG | 수정 | MOD | 삭제 | DEL |
| 저장 | SAVE | 조회 | SRCH | 실행 | EXEC |
| 취소 | CNCL | 확인 | CNF | 적용 | APLY |

**공통 라벨 (Labels)**

| 한글 | 약어 | 한글 | 약어 | 한글 | 약어 |
|------|------|------|------|------|------|
| 이름 | NM | 코드 | CD | 설명 | DESC |
| 상태 | STAT | 일시 | DT | 전체 | ALL |

### 3.1.3 등록 원칙

| 원칙 | 설명 | 예시 |
|------|------|------|
| **완성형** | "사용자명" 전체를 등록 (런타임 조합 X) | ✅ `COM.USER_NM` = "사용자명" |
| **중복 금지** | 등록 전 기존 키 검색 필수 | 기존 키 재사용 권장 |
| **동시 등록** | 모든 언어 파일에 함께 등록 | ko, en, ru 동시에 추가 |

---

## 3.2 코드 변환 패턴 (AS-IS → TO-BE)

### 3.2.1 Java 변환 패턴

```java
// AS-IS (하드코딩)
throw new RuntimeException("입력값이 올바르지 않습니다.");

// TO-BE (다국어 적용)
@Autowired
private MessageService messageService;

throw new RuntimeException(messageService.get("E.INVALID"));
```

### 3.2.2 JavaScript 변환 패턴

```javascript
// AS-IS (하드코딩)
alert("저장하시겠습니까?");
var columns = [{ title: "이름", data: "name" }];

// TO-BE (다국어 적용)
alert(SL.i18n.get("Q.SAVE"));
var columns = [{ title: SL.i18n.get("COM.NM"), data: "name" }];
```

### 3.2.3 JSP 변환 패턴

```jsp
<%-- AS-IS (하드코딩) --%>
<button type="button">저장</button>
<th>이름</th>

<%-- TO-BE (다국어 적용) --%>
<button type="button"><spring:message code="COM.SAVE"/></button>
<th><spring:message code="COM.NM"/></th>
```

### 3.2.4 MyBatis Mapper 변환 패턴

```xml
<!-- AS-IS -->
<select id="selectComCodeList" resultType="map">
    SELECT code_type, code_id, code_name
    FROM COM_CODE
    WHERE code_type = #{code_type}
</select>

<!-- TO-BE -->
<select id="selectComCodeList" resultType="map">
    SELECT
        code_type,
        code_id,
        CASE
            WHEN #{lang} = 'en' AND code_name_en IS NOT NULL THEN code_name_en
            WHEN #{lang} = 'ru' AND code_name_ru IS NOT NULL THEN code_name_ru
            ELSE code_name
        END AS code_name
    FROM COM_CODE
    WHERE code_type = #{code_type}
</select>
```

---

## 3.3 품질 관리 규칙

### 3.3.1 코드 리뷰 체크리스트

| 항목 | 체크 내용 |
|------|----------|
| **키 네이밍** | TYPE 접두사 사용 (COM, Q, N, E, G) |
| **중복 검사** | 기존 키 재사용 여부 확인 |
| **동시 등록** | ko/en/ru 파일 모두 등록 여부 |
| **완성형** | 런타임 조합 대신 완성형 등록 여부 |

### 3.3.2 테스트 체크리스트

| 항목 | 체크 내용 |
|------|----------|
| **언어 전환** | ko ↔ en ↔ ru 전환 시 모든 텍스트 변경 확인 |
| **누락 확인** | 하드코딩 텍스트 잔존 여부 |
| **레이아웃** | 영어/러시아어 텍스트로 인한 UI 깨짐 여부 |

---

# Part 4. 작업 범위 및 일정

> "무엇을 얼마나"

## 4.1 Phase별 작업 상세

### 선행 조건: 버전 통합 (머지)

> **다국어 작업 시작 전 필수 완료 사항** (담당: 별도 지정)

| 작업 | 내용 | 비고 |
|------|------|------|
| **버전 머지** | 기본버전 + UEBA버전 통합 | 2개 버전 코드 병합 |
| **키 동기화** | Properties/i18n 키 차이 해소 | ~977개 키 |

```
⚠️ 주의: 버전 통합이 완료되어야 다국어 작업 시작 가능
- 기본버전(Package): 소스 원본
- UEBA버전(Unpackage): UEBA 기능 포함 배포본

→ 통합 후 단일 코드베이스에서 다국어 작업 진행
```

---

### Phase 0: 선행 작업 (필수)

| 작업 | 내용 | 항목 수 |
|------|------|---------|
| **1** | Properties ↔ i18n JS 중복 키 제거 | 600~703개 |
| **2** | 영어 번역 누락 보완 | ~45개 |
| **3** | 관리 포인트 단일화 | - |

> 상세 배경 및 리스크는 [2.4 안정적인 다국어 관리를 위한 선행 작업](#24-안정적인-다국어-관리를-위한-선행-작업) 참조

---

### Phase 1: 인프라 구축

| 작업 | 내용 |
|------|------|
| 1-1 | `COM_USER.lang_cd` 언어 설정 컬럼 추가 |
| 1-2 | Spring LocaleResolver 설정 |
| 1-3 | 로그인 시 Locale 세션 저장 |
| 1-4 | 언어 선택 UI 구현 |

**SQL 예시:**
```sql
ALTER TABLE COM_USER ADD COLUMN lang_cd VARCHAR(5) DEFAULT 'ko' COMMENT '언어코드';
```

---

### Phase 2: Backend 다국어 적용

| 버전 | 항목 수 | 비고 |
|------|---------|------|
| 기본버전 | ~8,000건 | 화면 바인딩 대상 |
| UEBA버전 | ~5,000건 | 화면 바인딩 대상 |

---

### Phase 3: Frontend 다국어 적용

| 버전 | JavaScript | JSP | 합계 |
|------|-----------|-----|------|
| 기본버전 | ~20,000건 | ~8,000건 | ~28,000건 |
| UEBA버전 | ~12,000건 | ~10,000건 | ~22,000건 |

---

### Phase 4: DB 코드 다국어 적용 (~1,200건)

**대상 테이블:**

| 테이블명 | 추가 컬럼 | 용도 |
|---------|----------|------|
| `COM_CODE` | `code_name_en`, `code_name_ru` | 공통코드명 |
| `COM_MENU` | `menu_nm_en`, `menu_nm_ru` | 메뉴명 |
| `COM_USER_ROLE` | `role_nm_en`, `role_nm_ru` | 역할명 |
| `MGR_EQP` | `eqp_nm_en`, `eqp_nm_ru` | 장비명 |
| `MGR_ASSET` | `asset_nm_en`, `asset_nm_ru` | 자산명 |
| `NATION_LOCATION` | `nation_name_en`, `nation_name_ru` | 국가명 |

**SQL 예시:**
```sql
ALTER TABLE COM_CODE
ADD COLUMN code_name_en VARCHAR(100) AFTER code_name COMMENT '코드명(영문)',
ADD COLUMN code_name_ru VARCHAR(100) AFTER code_name_en COMMENT '코드명(러시아어)';
```

---

### Phase 5: 번역 작업 (추정 ~3,000건 ~ 5,000건)

**번역 대상:**
- 신규 메시지 영어 번역
- 신규 메시지 러시아어 번역
- DB 코드성 데이터 번역
- 외부 번역 업체 협업 가능

**산출 근거:**
```
하드코딩 발생 건수: ~27,000건 ~ 40,000건 (버전에 따라 상이)
   ↓
중복 제거 (동일 텍스트 다수 발생)
예: "저장", "취소", "조회" 등 반복 사용
추정 중복률: 80~90%
   ↓
순수 유니크 메시지: ~2,700건 ~ 5,400건
   ↓
기존 키로 커버 가능: ~500건 (추정)
   ↓
신규 번역 필요: ~2,200건 ~ 4,900건
   + DB 코드 데이터: ~1,200건
   ─────────────────────────
   총 추정: ~3,400건 ~ 6,100건

※ 정확한 건수는 Phase 2~3 키 추출 후 확정
```

---

### Phase 6: 테스트, 검증 및 UI 레이아웃

| 테스트 항목 | 내용 | 비고 |
|------------|------|------|
| **언어 전환** | ko ↔ en ↔ ru 전환 시 모든 텍스트 정상 표시 | 전 화면 대상 |
| **누락 확인** | 하드코딩 텍스트 잔존 여부 점검 | Grep 스크립트 활용 |
| **키 매핑** | 존재하지 않는 키 호출 시 fallback 동작 | 에러 로그 확인 |
| **레이아웃 점검** | 영어/러시아어 텍스트 UI 깨짐 여부 | 주요 화면 중심 |
| **UI 레이아웃 수정** | 텍스트 잘림/깨짐 발생 시 즉시 수정 | 테스트와 병행 |
| **기능 테스트** | 다국어 적용 후 기존 기능 정상 동작 | 회귀 테스트 |

> **참고:** 기존 "후행 작업: UI 레이아웃 업데이트"를 Phase 6에 통합.
> 테스트 중 발견된 UI 이슈는 즉시 수정하여 반복 테스트 비용 절감.

---

## 4.2 총 작업량 요약 (버전별)

| Phase | 작업 | 기본버전 | UEBA버전 | 담당 |
|-------|------|---------|---------|------|
| **선행 조건** | 버전 통합 | 2개 버전 머지 | - | 별도 지정 |
| **Phase 0** | 선행 작업 | ~750건 | ~750건 | 다국어 개발 |
| **Phase 1** | 인프라 구축 | 설정 작업 | 설정 작업 | 다국어 개발 |
| **Phase 2** | Java 하드코딩 제거 | ~8,000건 | ~5,000건 | 다국어 개발 |
| **Phase 3** | JS/JSP 하드코딩 제거 | ~28,000건 | ~22,000건 | 다국어 개발 |
| **Phase 4** | DB 스키마/Mapper 수정 | 6개 테이블 | 6개 테이블 | 다국어 개발 |
| **Phase 5** | 번역 (영어 + 러시아어) | ~3,000~5,000건 × 2 | ~3,000~5,000건 × 2 | 번역 담당 |
| **Phase 6** | 테스트/검증/UI 수정 | 전체 화면 | 전체 화면 | QA/개발팀 |
| **총계** | | **~40,000건 + α** | **~32,000건 + α** | |

---

## 4.3 진행순서 요약

```
[선행 조건] 버전 통합 완료 (기본버전 + UEBA버전 머지)
   ↓
Phase 0 완료 (중복 제거 필수!)
   ↓
Phase 1 인프라 구축 + 키 네이밍 표준 확정
   ↓
   ┌─────────────────────────────────────┐
   │  [개발 Track]     [번역 Track]       │
   │       ↓               ↓             │
   │  Phase 2~3        Phase 5           │
   │  (코드 수정)       (번역 작업)        │
   │       ↓               ↓             │
   │  Phase 4          번역 완료          │
   │  (DB 작업)                          │
   └─────────────────────────────────────┘
   ↓ (양쪽 완료 후)
Phase 6 테스트/검증 + UI 레이아웃 수정 (통합 진행)
```

---

## 4.4 Phase별 세부 진행 방법

### 4.4.1 Phase 0: 중복제거 세부 방법

#### 작업 목표
Properties와 i18n JS 파일 간 중복 키(~600~703개)를 제거하여 관리 포인트 단일화

#### 진행 순서

| 단계 | 작업 | 산출물 | 도구 |
|------|------|--------|------|
| **1** | 중복 키 목록 추출 | `duplicate_keys.xlsx` | 스크립트 (grep/diff) |
| **2** | 키별 사용처 분석 | 사용처 매핑 시트 | IDE 전역검색 |
| **3** | 역할 분리 기준 적용 | 분류 결과 시트 | 수동 판단 |
| **4** | 제거 대상 확정 | 제거 키 목록 | 리뷰 회의 |
| **5** | 코드 수정 및 키 제거 | 수정된 소스 | IDE |
| **6** | 단위 테스트 | 테스트 결과 | 수동/자동 |

#### 중복 키 추출 스크립트 예시

```bash
# Properties 키 추출
grep -o '^[A-Z][A-Z_\.]*=' messages_ko.properties | sed 's/=$//' > props_keys.txt

# i18n JS 키 추출
grep -o '"[A-Z][A-Z_\.0-9]*"' sl.messages-ko.js | tr -d '"' > js_keys.txt

# 중복 키 추출
comm -12 <(sort props_keys.txt) <(sort js_keys.txt) > duplicate_keys.txt
```

#### 분류 기준

| 분류 | 기준 | 조치 |
|------|------|------|
| **Properties만 유지** | Java에서만 사용 (이메일, PDF 등) | JS에서 제거 |
| **i18n JS만 유지** | 브라우저에서만 사용 (alert, UI) | Properties에서 제거 |
| **양쪽 사용** | Java + JS 모두 사용 | **i18n JS에 유지** (AJAX 응답 등은 클라이언트 처리 권장) |

#### 검증 방법

```bash
# 제거 후 누락 키 확인
grep -r "messageService.get\|SL.i18n.get" --include="*.java" --include="*.js" \
  | grep -oE '"[A-Z][A-Z_\.0-9]*"' | sort -u > used_keys.txt

# 파일에 존재하는 키와 비교
diff used_keys.txt available_keys.txt
```

---

### 4.4.2 Phase 1: 인프라 구축 세부 방법

#### 작업 목표
다국어 전환을 위한 기반 시스템 구축

#### 구축 항목 상세

| 작업 | 구현 내용 | 파일/위치 |
|------|----------|----------|
| **1-1. DB 컬럼 추가** | `COM_USER.lang_cd` | DDL 스크립트 |
| **1-2. LocaleResolver** | SessionLocaleResolver Bean 설정 | `servlet-context.xml` |
| **1-3. Interceptor** | 로그인 시 세션에 Locale 저장 | `LocaleInterceptor.java` |
| **1-4. 언어 선택 UI** | 헤더/설정 화면에 언어 드롭다운 | JSP/JS |

#### 1-1. DB 컬럼 추가 DDL

```sql
-- 사용자 언어 설정 컬럼
ALTER TABLE COM_USER 
ADD COLUMN lang_cd VARCHAR(5) DEFAULT 'ko' COMMENT '언어코드(ko/en/ru)';

-- 인덱스 (선택)
CREATE INDEX idx_com_user_lang ON COM_USER(lang_cd);
```

#### 1-2. Spring LocaleResolver 설정

```xml
<!-- servlet-context.xml -->
<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
    <property name="defaultLocale" value="ko"/>
</bean>

<bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <property name="paramName" value="lang"/>
</bean>

<mvc:interceptors>
    <ref bean="localeChangeInterceptor"/>
</mvc:interceptors>
```

#### 1-3. 로그인 시 Locale 세션 저장

```java
// LoginController.java 또는 LoginInterceptor.java
@PostMapping("/login")
public String login(HttpServletRequest request, ...) {
    // 로그인 처리 후
    String userLang = userService.getUserLangCd(userId); // DB에서 조회
    Locale locale = new Locale(userLang != null ? userLang : "ko");
    
    LocaleResolver localeResolver = RequestContextUtils.getLocaleResolver(request);
    localeResolver.setLocale(request, response, locale);
    
    return "redirect:/main";
}
```

#### 1-4. 언어 선택 UI 구현

```jsp
<!-- header.jsp -->
<select id="langSelector" onchange="changeLanguage(this.value)">
    <option value="ko" ${lang == 'ko' ? 'selected' : ''}>한국어</option>
    <option value="en" ${lang == 'en' ? 'selected' : ''}>English</option>
    <option value="ru" ${lang == 'ru' ? 'selected' : ''}>Русский</option>
</select>

<script>
function changeLanguage(lang) {
    // 언어 변경 API 호출 후 페이지 새로고침
    $.post('/api/user/language', {lang: lang}, function() {
        location.reload();
    });
}
</script>
```

#### 인프라 구축 완료 기준

| 항목 | 확인 방법 |
|------|----------|
| DB 컬럼 | `DESC COM_USER;`로 lang_cd 확인 |
| LocaleResolver | 브라우저에서 `?lang=en` 파라미터로 언어 전환 |
| 세션 저장 | 로그인 후 언어 설정 유지 확인 |
| 언어 선택 UI | 드롭다운 선택 시 페이지 언어 변경 |

---

### 4.4.3 키 네이밍 표준 관리 방법

#### 관리 체계

| 항목 | 내용 |
|------|------|
| **표준 문서** | 본 문서 3.1절 (키 네이밍 표준) |
| **관리 도구** | 엑셀 또는 구글 시트 (추후 협의) |
| **등록 절차** | 신규 키 등록 전 기존 키 검색 → 없으면 등록 |
| **리뷰** | 코드 리뷰 시 키 네이밍 규칙 준수 여부 확인 |

#### 키 관리 시트 양식

| 키 | 한국어 | 영어 | 러시아어 | 사용처 | 등록일 | 등록자 |
|---|--------|------|----------|--------|--------|--------|
| `COM.SAVE` | 저장 | Save | Сохранить | 공통 버튼 | 2025-01-01 | 홍길동 |
| `Q.DEL` | 삭제하시겠습니까? | Delete? | Удалить? | 삭제 확인 | 2025-01-01 | 홍길동 |
| `E.NOT_FOUND` | 데이터를 찾을 수 없습니다. | Data not found. | Данные не найдены. | 에러 메시지 | 2025-01-02 | 김철수 |

#### 신규 키 등록 절차

```
1. 기존 키 검색 (관리 시트 또는 소스 검색)
   └─ 동일/유사 키 있음 → 기존 키 재사용
   └─ 없음 → 2단계로
   
2. 키 네이밍 규칙에 따라 키 생성
   └─ TYPE.ACTION 또는 TYPE.LABEL 형식
   
3. 관리 시트에 등록
   └─ ko, en, ru 값 모두 입력 (번역 전이면 ko만 우선)
   
4. 소스 파일에 추가
   └─ Properties (Backend용) 또는 i18n JS (Frontend용)
   └─ 모든 언어 파일에 동시 추가
   
5. 코드에서 사용
```

#### 키 검색 도구 (IDE 활용)

```
# IntelliJ/Eclipse 전역 검색
- Ctrl+Shift+F (전역 검색)
- 검색 패턴: "COM\." 또는 "Q\." 등
- 파일 범위: *.properties, *.js
```

---

### 4.4.4 Phase 2~3: 개발(코드 수정) 진행 방법

#### 작업 목표
하드코딩된 한글 텍스트를 다국어 키로 변환

#### 진행 순서 (파일 단위)

```
1. 하드코딩 한글 추출
   └─ 대상 파일에서 한글 텍스트 목록 작성
   
2. 기존 키 매핑
   └─ 추출된 텍스트가 기존 키로 커버 가능한지 확인
   └─ 매핑 가능 → 해당 키 사용
   └─ 매핑 불가 → 신규 키 생성
   
3. 신규 키 등록 (한국어 우선)
   └─ 관리 시트에 키 + 한국어 값 등록
   └─ Properties/i18n JS 파일에 ko 값 추가
   └─ en, ru는 번역 Track에서 처리 (임시로 ko 값 복사)
   
4. 코드 수정 (변수 치환)
   └─ 하드코딩 텍스트 → 다국어 함수 호출로 변경
   
5. 단위 확인
   └─ 해당 화면 접속하여 텍스트 정상 표시 확인
```

#### 작업 예시 (JavaScript)

```javascript
// [BEFORE] 하드코딩 상태
function deleteItem() {
    if (confirm("삭제하시겠습니까?")) {
        // 삭제 로직
        alert("삭제되었습니다.");
    }
}

// [STEP 1] 한글 추출
// - "삭제하시겠습니까?" → Q.DEL 매핑 가능
// - "삭제되었습니다." → N.DEL_OK 신규 등록 필요

// [STEP 2] i18n JS 파일에 키 등록
// sl.messages-ko.js
SL.messages["Q.DEL"] = "삭제하시겠습니까?";
SL.messages["N.DEL_OK"] = "삭제되었습니다.";

// sl.messages-en.js (임시 - 번역 전)
SL.messages["Q.DEL"] = "삭제하시겠습니까?";  // 추후 번역
SL.messages["N.DEL_OK"] = "삭제되었습니다."; // 추후 번역

// [STEP 3] 코드 수정 (변수 치환)
function deleteItem() {
    if (confirm(SL.i18n.get("Q.DEL"))) {
        // 삭제 로직
        alert(SL.i18n.get("N.DEL_OK"));
    }
}
```

#### 모듈별 진행 순서 (권장)

| 순서 | 모듈/영역 | 예상 건수 | 비고 |
|------|----------|----------|------|
| 1 | 공통 컴포넌트 (버튼, 라벨) | ~500건 | 재사용성 높음 |
| 2 | SOAR 모듈 | ~8,500건 | 1순위 기능 |
| 3 | Dashboard | ~2,600건 | 2순위 기능 |
| 4 | Monitoring | ~3,900건 | 2순위 기능 |
| 5 | System/설정 | ~2,500건 | 3순위 기능 |
| 6 | 기타 화면 | 나머지 | - |

#### 일일 작업 플로우

```
[오전]
1. 전일 작업 리뷰 (누락/오류 확인)
2. 금일 대상 파일 선정 (5~10개 파일)
3. 한글 추출 및 키 매핑

[오후]
4. 신규 키 등록 (한국어 우선)
5. 코드 수정 (변수 치환)
6. 단위 확인 및 커밋
7. 작업 현황 업데이트 (관리 시트)
```

---

### 4.4.5 Phase 4: DB 작업 세부 방법

#### 작업 목표
코드성 테이블에 다국어 컬럼 추가 및 Mapper 수정

#### 대상 테이블 및 컬럼 상세

| 테이블 | 기존 컬럼 | 추가 컬럼 | 데이터 건수 |
|--------|----------|----------|------------|
| `COM_CODE` | `code_name` | `code_name_en`, `code_name_ru` | ~800건 |
| `COM_MENU` | `menu_nm` | `menu_nm_en`, `menu_nm_ru` | ~150건 |
| `COM_USER_ROLE` | `role_nm` | `role_nm_en`, `role_nm_ru` | ~20건 |
| `MGR_EQP` | `eqp_nm` | `eqp_nm_en`, `eqp_nm_ru` | ~100건 |
| `MGR_ASSET` | `asset_nm` | `asset_nm_en`, `asset_nm_ru` | ~100건 |
| `NATION_LOCATION` | `nation_name` | `nation_name_en`, `nation_name_ru` | ~30건 |

#### DDL 스크립트

```sql
-- COM_CODE
ALTER TABLE COM_CODE
ADD COLUMN code_name_en VARCHAR(256) AFTER code_name COMMENT '코드명(영문)',
ADD COLUMN code_name_ru VARCHAR(256) AFTER code_name_en COMMENT '코드명(러시아어)';

-- COM_MENU
ALTER TABLE COM_MENU
ADD COLUMN menu_nm_en VARCHAR(60) AFTER menu_nm COMMENT '메뉴명(영문)',
ADD COLUMN menu_nm_ru VARCHAR(60) AFTER menu_nm_en COMMENT '메뉴명(러시아어)';

-- COM_USER_ROLE
ALTER TABLE COM_USER_ROLE
ADD COLUMN role_nm_en VARCHAR(50) AFTER role_nm COMMENT '역할명(영문)',
ADD COLUMN role_nm_ru VARCHAR(50) AFTER role_nm_en COMMENT '역할명(러시아어)';

-- MGR_EQP
ALTER TABLE MGR_EQP
ADD COLUMN eqp_nm_en VARCHAR(100) AFTER eqp_nm COMMENT '장비명(영문)',
ADD COLUMN eqp_nm_ru VARCHAR(100) AFTER eqp_nm_en COMMENT '장비명(러시아어)';

-- MGR_ASSET
ALTER TABLE MGR_ASSET
ADD COLUMN asset_nm_en VARCHAR(100) AFTER asset_nm COMMENT '자산명(영문)',
ADD COLUMN asset_nm_ru VARCHAR(100) AFTER asset_nm_en COMMENT '자산명(러시아어)';

-- NATION_LOCATION
ALTER TABLE NATION_LOCATION
ADD COLUMN nation_name_en VARCHAR(100) AFTER nation_name COMMENT '국가명(영문)',
ADD COLUMN nation_name_ru VARCHAR(100) AFTER nation_name_en COMMENT '국가명(러시아어)';
```

#### MyBatis Mapper 수정 패턴

```xml
<!-- 기존 -->
<select id="selectComCodeList" resultType="map">
    SELECT code_type, code_id, code_name
    FROM COM_CODE
    WHERE code_type = #{codeType}
</select>

<!-- 수정 후 -->
<select id="selectComCodeList" resultType="map">
    SELECT 
        code_type, 
        code_id,
        CASE 
            WHEN #{lang} = 'en' AND code_name_en IS NOT NULL AND code_name_en != '' 
                THEN code_name_en
            WHEN #{lang} = 'ru' AND code_name_ru IS NOT NULL AND code_name_ru != '' 
                THEN code_name_ru
            ELSE code_name
        END AS code_name
    FROM COM_CODE
    WHERE code_type = #{codeType}
    ORDER BY order_no
</select>
```

#### 진행 순서

| 단계 | 작업 | 산출물 |
|------|------|--------|
| 1 | DDL 스크립트 작성 | `i18n_ddl.sql` |
| 2 | 개발DB 적용 및 검증 | 컬럼 추가 확인 |
| 3 | Mapper XML 수정 | 수정된 Mapper 파일들 |
| 4 | Service/Controller 수정 | lang 파라미터 전달 로직 |
| 5 | 화면 테스트 | 언어별 데이터 표시 확인 |
| 6 | 운영DB 적용 | 배포 스크립트 |

#### 데이터 초기화 (번역 데이터 입력)

```sql
-- 번역 데이터는 Phase 5 완료 후 입력
-- 예시: COM_CODE 번역 입력
UPDATE COM_CODE SET 
    code_name_en = 'Normal',
    code_name_ru = 'Нормальный'
WHERE code_type = 'STATUS' AND code_id = '01';
```

---

### 4.4.6 Phase 5~6: 번역, 테스트 및 UI 레이아웃 통합 방법

#### 번역 작업 (Phase 5)

**진행 방식:**

| 항목 | 내용 |
|------|------|
| **번역 대상** | Phase 2~3에서 등록된 신규 키 + DB 코드 데이터 |
| **번역 방식** | 내부 / 외주 (추후 협의) |
| **품질 검수** | 네이티브 스피커 또는 전문 업체 검토 |
| **산출물** | 번역 완료된 Properties, i18n JS, DB 데이터 |

**번역 시트 양식:**

| 키 | 한국어 | 영어 | 러시아어 | 검수 상태 |
|---|--------|------|----------|----------|
| `Q.SAVE` | 저장하시겠습니까? | Do you want to save? | Сохранить? | ✅ 완료 |
| `N.DEL_OK` | 삭제되었습니다. | Deleted successfully. | Удалено. | ✅ 완료 |

#### 테스트 및 UI 레이아웃 통합 (Phase 6)

> **핵심 변경:** 기존 "후행 작업: UI 레이아웃 업데이트"를 Phase 6에 통합하여 테스트와 UI 수정을 동시 진행

**통합 진행 이유:**

| 기존 방식 | 통합 방식 |
|----------|----------|
| 테스트 완료 → UI 수정 (별도) | 테스트 중 UI 이슈 발견 시 **즉시 수정** |
| 2회 반복 테스트 필요 | 1회 통합 테스트로 완료 |
| 일정 지연 위험 | 효율적 일정 관리 |

**테스트 시나리오:**

```
[시나리오 1: 언어 전환 테스트]
1. 한국어로 로그인
2. 주요 화면 순회하며 텍스트 확인
3. 영어로 전환
4. 동일 화면 순회 - 텍스트 변환 확인
5. 러시아어로 전환
6. 동일 화면 순회 - 텍스트 변환 확인

[시나리오 2: 누락 텍스트 점검]
1. 각 화면에서 한글 텍스트 잔존 여부 확인
2. 발견 시 키 등록 및 코드 수정 (즉시)

[시나리오 3: UI 레이아웃 점검]
1. 영어 모드에서 버튼/라벨 잘림 확인
2. 테이블 헤더 텍스트 오버플로우 확인
3. 팝업/모달 레이아웃 깨짐 확인
4. 발견 시 CSS/HTML 수정 (즉시)
```

**UI 레이아웃 수정 기준:**

| 이슈 유형 | 수정 방법 |
|----------|----------|
| 버튼 텍스트 잘림 | `min-width` 또는 `padding` 조정 |
| 라벨 오버플로우 | `white-space: nowrap` 제거 또는 `width` 확대 |
| 테이블 헤더 | 컬럼 너비 `%` 또는 `min-width` 조정 |
| 팝업 너비 부족 | 팝업 `width` 확대 |

**검증 체크리스트:**

| 항목 | 한국어 | 영어 | 러시아어 | 비고 |
|------|--------|------|----------|------|
| 로그인 화면 | ☐ | ☐ | ☐ | |
| 메인 대시보드 | ☐ | ☐ | ☐ | |
| SOAR 화면 | ☐ | ☐ | ☐ | |
| 시스템 설정 | ☐ | ☐ | ☐ | |
| ... | | | | |

**하드코딩 잔존 확인 스크립트:**

```bash
# JSP 파일에서 한글 텍스트 검색 (다국어 함수 호출 제외)
grep -rn "[가-힣]" --include="*.jsp" \
  | grep -v "spring:message" \
  | grep -v "<%--" \
  | grep -v "<!-- " > remaining_hardcode.txt

# JavaScript 파일에서 한글 텍스트 검색
grep -rn "[가-힣]" --include="*.js" \
  | grep -v "SL.i18n" \
  | grep -v "//" \
  | grep -v "console.log" >> remaining_hardcode.txt
```

---

## 4.5 품질 관리 및 완료 기준

### 완료 기준 (Definition of Done)

| Phase | 완료 기준 |
|-------|----------|
| **Phase 0** | 중복 키 0개, 영어 번역 누락 0개 |
| **Phase 1** | 언어 전환 시 세션 유지, UI에서 언어 선택 가능 |
| **Phase 2~3** | 대상 파일 하드코딩 한글 0건 (로그/주석 제외) |
| **Phase 4** | 모든 대상 테이블 다국어 컬럼 추가 완료 |
| **Phase 5** | 신규 키 100% 번역 완료, 검수 완료 |
| **Phase 6** | 전 화면 언어 전환 정상, UI 깨짐 0건 |

### 주간 진행 현황 리포트 양식

| 항목 | 이번 주 | 누적 | 목표 | 달성률 |
|------|---------|------|------|--------|
| Java 파일 처리 | 50개 | 200개 | 683개 | 29% |
| JS 파일 처리 | 80개 | 300개 | 1,002개 | 30% |
| JSP 파일 처리 | 40개 | 150개 | 555개 | 27% |
| 신규 키 등록 | 200개 | 800개 | ~3,000개 | 27% |
| 번역 완료 | 150개 | 500개 | ~3,000개 | 17% |

---

# 부록. 의사결정 필요 사항

> 사전 미팅에서 합의가 필요한 항목

## A.1 필수 의사결정 항목

| 항목 | 선택지 | 권장 | 비고 |
|------|--------|------|------|
| **버전 통합 일정** | 다국어 작업 전 완료 | **필수** | 기본/UEBA 머지 |
| **대상 버전 선택** | 기본버전 / UEBA버전 / 통합 | **통합** | 단일 코드베이스 권장 |
| **중복제거 선행 여부** | 선행 / 생략 | **선행** | 생략 시 6곳 관리 |
| **아키텍처 선택** | 하이브리드 / DB 통합 | **하이브리드** | 기존 인프라 98% 활용 |
| **번역 방식** | 내부 / 외주 | 추후 협의 | ~3,000~5,000건 × 2언어 |
| **키 관리 도구** | 엑셀 / 구글시트 / 별도 시스템 | 추후 협의 | 협업 편의성 고려 |

## A.2 우선순위 결정 필요

| 모듈 | 기본버전 | UEBA버전 | 제안 우선순위 |
|------|---------|---------|--------------|
| SOAR | ~8,500건 | ~8,500건 | 1순위 |
| UEBA | - | ~7,300건 | 1순위 (UEBA만) |
| Monitoring | ~3,900건 | ~3,900건 | 2순위 |
| Dashboard | ~2,600건 | ~2,600건 | 2순위 |
| System | ~2,500건 | ~2,500건 | 3순위 |

## A.3 리스크 공유

| 리스크 | 영향 | 대응 방안 |
|--------|------|----------|
| 버전 통합 지연 | 다국어 작업 시작 불가 | 버전 머지 일정 사전 확정 |
| 버전 간 키 차이 | 일부 메시지 누락 | 동기화 작업 선행 (977개) |
| 중복제거 생략 | 관리 포인트 2배 증가 | 중복제거 필수 진행 |
| 번역 품질 | 사용자 경험 저하 | 네이티브 검수 또는 전문 업체 |
| 일정 지연 | Phase 간 의존성 | Phase 2~3 병렬화로 단축 |
| UI 레이아웃 미대응 | 텍스트 잘림/깨짐 | Phase 6에서 테스트와 동시 수정 |

---

## 참고 문서

- `docs/multilanguagesuport_result.md` - 상세 분석 문서
- `docs/multilanguagesuport.md` - 초기 분석 문서
- [Spring Boot Internationalization Guide](https://lokalise.com/blog/spring-boot-internationalization/) - Spring i18n 베스트 프랙티스

---

## 버전 이력

| 버전 | 일자 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-17 | 초안 작성 (UEBA버전 기준) |
| 1.1 | 2025-12-17 | 기본버전/UEBA버전 비교 구조로 개선 |
| 1.2 | 2025-12-18 | 기존 다국어버전 현황 추가 (3개 버전 비교) |
| 1.3 | 2025-12-18 | 1.2.1 기본버전 모듈별 다국어 현황 요약 추가 |
| 1.4 | 2025-12-18 | 정합성 검증 및 수치 오류 수정 |
| 1.5 | 2025-12-18 | 4.4 Phase별 세부 진행 방법 추가, Phase 6에 UI 레이아웃 통합 |
