# CloudESM_WEB 다국어(i18n) 기능 개선 

**작성일:** 2025-12-17
**최종 수정일:** 2025-12-18 (회의 결과 반영)
**목적:** 개발 사전 미팅용 의사결정 지원 문서
**관련 문서:** [다국어 기능 현황 및 개선방향 회의 결과.md](./다국어%20기능%20현황%20및%20개선방향%20회의%20결과.md)

---

## 목차

- [Part 1. 현재 상태 (AS-IS)](#part-1-현재-상태-as-is)
- [Part 2. 개발 방향 (WHY & WHAT)](#part-2-개발-방향-why--what)
- [Part 3. 개발 방법 (HOW)](#part-3-개발-방법-how)
- [Part 4. 작업 범위 및 일정](#part-4-작업-범위-및-일정)
- [부록. 의사결정 필요 사항](#부록-의사결정-필요-사항)

---

# Part 1. 현재 상태 (AS-IS)

> "지금 어떤 상황인가" - 기본버전/기존 다국어버전 비교

## 1.1 버전별 현황 비교 (Overview)

### 1.1.1 전체 요약 비교

| 구분 | 기본버전 (Package) | 기존 다국어버전 | 기본 vs 다국어 |
|------|-------------------|-----------------|----------------|
| **하드코딩 전체** | 74,585건 | 56,867건 | -17,718건 (-24%) |
| **화면 바인딩 (추정)** | ~40,000건 | ~32,000건 | -8,000건 (-20%) |
| **Properties 키** | 2,089건 | 3,113건 | +1,024건 (+49%) |
| **i18n JS 키** | 1,889건 | 2,921건 | +1,032건 (+55%) |
| **DB 바인딩 데이터** | ~1,200건 | ~1,200건 | 동일 |
| **총 다국어 대상** | ~79,763건 | ~64,101건 | -15,662건 (-20%) |

> **핵심 차이점:**
> - 기본버전(Package)은 소스 원본으로 하드코딩이 더 많음 (번들링 전)
> - **기존 다국어버전**은 기본버전 대비 하드코딩 24% 감소, Properties/i18n 키 약 50% 증가

### 1.1.2 영역별 분포 비교

| 영역 | 기본버전 파일 수 | 기본버전 항목 | 기존 다국어버전 파일 수 | 기존 다국어버전 항목 |
|------|-----------------|--------------|----------------------|---------------------|
| **Java** | 683개 | 28,247건 | ~2,700개 | 30,840건 |
| **JavaScript** | 1,002개 | 35,103건 | 1,532개 | 18,182건 |
| **JSP** | 555개 | 11,366건 | 708개 | 7,845건 |

> **특이점:** 
> - 기존 다국어버전은 Java 파일 수가 많음 (전체 모듈 포함, 기본버전은 web 모듈 중심)
> - 기존 다국어버전은 JSP 하드코딩이 기본버전 대비 31% 감소

### 1.1.3 주요 하드코딩 유형 (공통)

| 영역 | 하드코딩 유형 |
|------|-------------|
| **Java** | 에러/예외 메시지, 로그 메시지, Validation 메시지, 이메일 템플릿 |
| **JavaScript** | alert/confirm, 테이블 헤더, 버튼/라벨, placeholder, 차트 레이블, `.html()`, `.text()`, `.append()` 동적 삽입 |
| **JSP** | `<label>`, `<th>`, `<button>` 텍스트, `<option>` 항목, placeholder/title 속성 |

---

## 1.2 기본버전 (Package) 상세 현황

> 분석 대상: `C:\projects\eyeCloudXOAR_V4_package\0_package\`
> 분석 일시: 2025-12-17

### 1.2.1 전체 현황 요약

| 구분 | 파일/테이블 수 | 전체 항목 | 화면 바인딩 (추정) | 상태 |
|------|---------------|----------|-------------------|------|
| **하드코딩 텍스트** | 1,275개 파일 | 74,585건 | **~40,000건** | 다국어 미적용 |
| **기존 Properties** | 4개 파일 | 2,089건 | ~2,500건 | 98% 번역 완료 |
| **기존 i18n JS** | 4개 파일 | 1,889건 | ~2,000건 | 99% 번역 완료 |
| **DB 바인딩 데이터** | 2개 테이블 | ~950건 | ~950건 | 다국어 컬럼 없음 |
| **총 다국어 대상** | | **~79,763건** | **~45,700건** | |

> **핵심:** 로그, 주석 등 내부용 제외 시 **실제 작업 대상은 ~45,700건**
> **회의 결정:** DB 다국어 대상은 COM_CODE, COM_MENU 2개 테이블만

#### 모듈별 다국어 현황 요약

**전체 모듈 현황 (Java 기준)**

| 모듈 | Java 파일 | 한글 항목 | 다국어 대상 | 비고 |
|------|----------|----------|------------|------|
| **web** | 683개 | 28,247건 | ✅ 대상 | 메인 웹 애플리케이션 |
| **analyzer** | 143개 | 3,537건 | ✅ 대상 | 실시간/배치 분석 |
| **soar_analyzer** | 60개 | 3,282건 | ✅ 대상 | AI/ML SOAR 분석 |
| **analyzer-assistant** | 84개 | 1,224건 | ✅ 대상 | Analyzer 보조 |
| agent | 203개 | 771건 | ⚪ 제외 | 데이터 수집 (백엔드) |
| datamanager | 81개 | 628건 | ⚪ 제외 | 마스터 데이터 관리 |
| visualization | 94개 | 581건 | ⚪ 제외 | 시각화 도구 (SWT) |
| pms | 32개 | 451건 | ⚪ 제외 | 패키지 관리 |
| parser-tailer | 93개 | 420건 | ⚪ 제외 | 로그 파서 (SWT) |
| nomalizer | 91개 | 362건 | ⚪ 제외 | 로그 정규화 |
| procmonitor | 41개 | 344건 | ⚪ 제외 | 프로세스 모니터 |
| netflow | 58개 | 227건 | ⚪ 제외 | 네트워크 플로우 |
| reducer | 22개 | 144건 | ⚪ 제외 | 데이터 축소 |
| integrity | 4개 | 39건 | ⚪ 제외 | 무결성 검증 |
| launcher | 11개 | 31건 | ⚪ 제외 | 데스크톱 런처 |
| common | 34개 | 26건 | ⚪ 제외 | 공유 유틸리티 |
| 기타 8개 모듈 | 225개 | 13건 | ⚪ 제외 | collector, proxy 등 |
| **합계** | **1,959개** | **40,327건** | | |

> **참고:** JS/JSP는 모두 web 모듈에 포함

**다국어 대상 vs 제외 모듈 비교**

| 구분 | Java 파일 | 한글 항목 | 비율 |
|------|----------|----------|------|
| **다국어 대상** (web, analyzer, soar_analyzer, analyzer-assistant) | 970개 | 36,290건 | **90%** |
| **제외** (agent, datamanager, nomalizer 등 백엔드) | 989개 | 4,037건 | 10% |
| **전체** | 1,959개 | 40,327건 | 100% |

> **결론:** 
> - 다국어 작업은 **web + analyzer 계열 4개 모듈**에 집중
> - 백엔드 전용 모듈(agent, nomalizer 등)은 UI가 없어 다국어 제외
> - 대상 모듈에 집중 시 전체 Java 한글 항목의 **90%를 커버** (36,290건)

### 1.2.2 하드코딩 영역별 분포

| 영역 | 파일 수 | 한글 포함 파일 | 전체 항목 | 화면 바인딩 (추정) | 비고 |
|------|---------|--------------|----------|-------------------|------|
| **Java** | 683개 | 440개 | 28,247건 | ~8,000건 | 로그/주석 제외 |
| **JavaScript** | 1,002개 | 440개 | 35,103건 | ~20,000건 | console.log 제외 |
| **JSP** | 555개 | 395개 | 11,366건 | ~8,000건 | 주석 제외 |

**소스 구조:**

| 소스 경로 | 파일 유형 |
|----------|----------|
| `web/src/main/java/com/seculayer/web/` | Java 컨트롤러, 서비스 |
| `web/src/main/frontend/src/` | JavaScript 소스 |
| `web/src/main/webapp/WEB-INF/jsp/` | JSP 뷰 템플릿 |

### 1.2.3 기존 다국어 인프라 현황

**Properties 파일 (Backend)**

| 파일명 | 경로 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `messages_ko.properties` | `WEB-INF/messages/` | 652 | - |
| `messages_en.properties` | `WEB-INF/messages/` | 650 | 99.7% (2개 누락) |
| `resources_ko.properties` | `WEB-INF/messages/` | 1,437 | - |
| `resources_en.properties` | `WEB-INF/messages/` | 1,427 | 99.3% (10개 누락) |
| **합계** | | **2,089 (ko)** | **2,077 (en)** |

**i18n JS 파일 (Frontend)** - ⚠️ **회의 결정: Properties로 통합 예정**

| 파일명 | 경로 | 키 수 | 영어 번역 |
|--------|------|-------|----------|
| `sl.messages-ko.js` | `resources/js/i18n/` | 678 | - |
| `sl.messages-en.js` | `resources/js/i18n/` | 672 | 99.1% (6개 누락) |
| `sl.resources-ko.js` | `resources/js/i18n/` | 1,211 | - |
| `sl.resources-en.js` | `resources/js/i18n/` | 1,211 | 100% |
| **합계** | | **1,889 (ko)** | **1,883 (en)** |

---

## 1.3 공통 문제점

### 1.3.1 Properties ↔ JS 중복 (회의 결정: Properties 단일화로 해결)

| 버전 | Properties (messages) | i18n JS (messages) | 중복 키 (추정) |
|------|----------------------|-------------------|---------------|
| 기본버전 | 652 | 678 | ~600개 (90%+) |

> ✅ **회의 결정:** Properties 파일 하나로 통합하여 중복 문제 해결
> - JS에서 필요 시 Properties에서 JSON 추출하여 사용
> - 관리 포인트 단일화

### 1.3.2 DB 다국어 미지원

| 테이블명 | 현재 컬럼 | 다국어 대상 | 상태 |
|---------|----------|------------|------|
| `COM_CODE` | `code_name` (VARCHAR 256) | ✅ **대상** | 다국어 적용 예정 |
| `COM_MENU` | `menu_nm` (VARCHAR 60) | ✅ **대상** | 다국어 적용 예정 |
| `COM_USER_ROLE` | `role_nm` | ❌ 제외 | 다국어 불필요 |
| `MGR_EQP` | `eqp_nm` | ❌ 제외 | 다국어 불필요 |
| `MGR_ASSET` | `asset_nm` | ❌ 제외 | 다국어 불필요 |
| `NATION_LOCATION` | `nation_name` | ❌ 제외 | 다국어 불필요 |

> ✅ **회의 결정:** COM_CODE, COM_MENU 2개 테이블만 다국어 적용
> - 나머지 테이블(역할, 장비, 자산, 위치)은 다국어 불필요로 제외

### 1.3.3 기존 인프라 평가 (공통)

| 평가 항목 | 결과 | 상세 |
|----------|------|------|
| 지원 언어 | ✅ ko, en (2개) | 한/영 지원 |
| 번역 완성도 | ✅ 98%+ | 누락 45개 미만 |
| 번역 품질 | ✅ 양호 | 실제 영어로 번역됨 |
| 키 네이밍 규칙 | ⚠️ 모듈 기반 | CNF, ERR, BTN, LBL 등 → **새 규칙(msg/lbl/btn)으로 재작성** |
| 파일 내 중복 | ✅ 없음 | 각 파일 내 중복 키 없음 |
| **Properties↔JS 중복** | ✅ **해결 예정** | Properties 단일화로 해결 |

---

# Part 2. 개발 방향 (WHY & WHAT)

> "왜, 무엇을 해야 하는가"

## 2.1 다국어 적용 목표

| 목표 | 설명 |
|------|------|
| **하드코딩 제거** | ~40,000건의 하드코딩 텍스트 다국어 전환 |
| **관리 포인트 최소화** | Properties 단일화로 2곳 관리 (Properties + DB) |
| **다국어 지원** | 한국어(기본) + 영어, 러시아어 지원 |

---

## 2.2 아키텍처: Properties 단일화 ✅ 회의 확정

### 2.2.1 확정 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│  Backend + Frontend                │  DB (코드성)           │
│  ──────────────────────────────    │  ────────────────────  │
│  Properties 파일 (단일화)           │  lang_cd + row 방식    │
│  messages_ko.properties            │  COM_CODE              │
│  messages_en.properties            │  COM_MENU              │
│  messages_ru.properties            │                        │
│  resources_ko.properties           │                        │
│  resources_en.properties           │                        │
│  resources_ru.properties           │                        │
└─────────────────────────────────────────────────────────────┘
```

### 2.2.2 Properties 단일화 선택 이유

| 이유 | 설명 |
|------|------|
| **관리 포인트 최소화** | Properties + DB 2곳만 관리 |
| **기존 인프라 활용** | Properties에 98% 번역 완료 상태 |
| **현재 구조 활용** | JSP에서 이미 Properties 사용 중 |
| **확장성** | React/Vue로 전환 시 Properties에서 JSON 추출 가능 |

### 2.2.3 Frontend에서 Properties 사용 방법

> ⚠️ **[협의 필요]** backend, frontend를 아우르는 기술 탐색 및 테스트 후 추후 결정

**가능한 방식:**
1. JSP에서 JavaScript 변수로 전달
2. API 엔드포인트로 메시지 조회
3. Properties → JSON 빌드 타임 변환

---

## 2.3 영역 분리 기준 (Properties / DB)

### 2.3.1 저장소별 분리 기준

| 저장소 | 대상 | 판단 기준 |
|--------|------|----------|
| **Properties** | 모든 메시지 (Backend + Frontend) | 고정 메시지, 시스템 메시지 |
| **DB** | 코드성 데이터 (COM_CODE, COM_MENU) | 관리자가 화면에서 직접 수정하는 데이터 |

### 2.3.2 영역별 상세 기준

| 영역 | 포함 대상 | 제외 대상 |
|------|----------|----------|
| **Properties** | alert/confirm, 테이블 헤더, 버튼/라벨, placeholder, 이메일 템플릿, PDF/보고서, Validation 메시지 | 코드성 데이터 |
| **DB** | COM_CODE(공통코드명), COM_MENU(메뉴명) | 고정 메시지 |

### 2.3.3 결정 플로우

```
Q1. 관리자가 화면에서 직접 수정하는 데이터인가?
    YES → DB (COM_CODE 또는 COM_MENU)
    NO  → Properties 파일
```

---

## 2.4 번역 방식 ✅ 회의 확정

| 언어 | 번역 방식 | 비고 |
|------|----------|------|
| **영어** | 기존 번역 활용 + 추가 내용 직접 번역 | 98% 기존 번역 존재 |
| **러시아어** | AI로 일괄 번역 | 신규 언어 |

---

## 2.5 UI 길이 처리 기준 ✅ 회의 확정

| 구분 | 처리 방식 | 예시 |
|------|----------|------|
| **중요 항목** | 직접 분기 처리 (UI별 맞춤 대응) | 메인 메뉴, 주요 버튼 |
| **일반 항목** | 동적 처리 (점점점 + 툴팁 등) | 테이블 컬럼, 일반 라벨 |

---

# Part 3. 개발 방법 (HOW)

> "어떻게 하는가" - 규칙과 패턴

## 3.1 키 네이밍 표준 ✅ 회의 확정

### 3.1.1 TYPE 정의 (3종류)

| TYPE | 의미 | 용도 | 예시 키 | 예시 값 |
|------|------|------|---------|---------| 
| `msg` | 메시지 (문장) | alert, confirm, 안내문, 에러 메시지 | `msg.save.confirm` | "저장하시겠습니까?" |
| `lbl` | 라벨 (단어) | 컬럼명, 필드명, 타이틀 | `lbl.username` | "사용자명" |
| `btn` | 버튼 | 저장, 취소, 삭제 버튼 등 | `btn.save` | "저장" |

### 3.1.2 코드 형식 표준

| 항목 | 규칙 | 예시 |
|------|------|------|
| **대소문자** | **소문자** 사용 | `msg.save.confirm` (O), `MSG.SAVE.CONFIRM` (X) |
| **약어** | **약어 사용 금지**, 단어 그대로 사용 | `lbl.username` (O), `lbl.user.nm` (X) |
| **구분자** | 점(.) 사용 | `msg.delete.success` |
| **의미** | 의미 있는 이름 사용 | `msg.save.confirm` (O), `CNF.COM.0001` (X) |

### 3.1.3 키 네이밍 예시

| 용도 | 키 | 한국어 | 영어 | 러시아어 |
|------|---|--------|------|----------|
| 저장 확인 | `msg.save.confirm` | 저장하시겠습니까? | Do you want to save? | Вы хотите сохранить? |
| 삭제 완료 | `msg.delete.success` | 삭제되었습니다. | Deleted successfully. | Успешно удалено. |
| 입력 안내 | `msg.input.required` | 값을 입력하세요. | Please enter a value. | Пожалуйста, введите значение. |
| 에러 메시지 | `msg.error.notfound` | 데이터를 찾을 수 없습니다. | Data not found. | Данные не найдены. |
| 사용자명 라벨 | `lbl.username` | 사용자명 | Username | Имя пользователя |
| 상태 라벨 | `lbl.status` | 상태 | Status | Статус |
| 저장 버튼 | `btn.save` | 저장 | Save | Сохранить |
| 취소 버튼 | `btn.cancel` | 취소 | Cancel | Отмена |

### 3.1.4 등록 원칙

| 원칙 | 설명 | 예시 |
|------|------|------|
| **완성형** | "사용자명" 전체를 등록 (런타임 조합 X) | ✅ `lbl.username` = "사용자명" |
| **중복 금지** | 등록 전 기존 키 검색 필수 | 기존 키 재사용 권장 |
| **동시 등록** | 모든 언어 파일에 함께 등록 | ko, en, ru 동시에 추가 |

---

## 3.2 코드 변환 패턴 (AS-IS → TO-BE)

### 3.2.1 Java 변환 패턴

```java
// AS-IS (하드코딩)
throw new RuntimeException("입력값이 올바르지 않습니다.");

// TO-BE (다국어 적용)
@Autowired
private MessageService messageService;

throw new RuntimeException(messageService.get("msg.error.invalid"));
```

### 3.2.2 JavaScript 변환 패턴

> ⚠️ **[협의 필요]** Properties에서 JS로 메시지 전달 방식 확정 후 패턴 결정

```javascript
// AS-IS (하드코딩)
alert("저장하시겠습니까?");
var columns = [{ title: "이름", data: "name" }];

// TO-BE (다국어 적용) - 방식은 추후 확정
alert(getMessage("msg.save.confirm"));
var columns = [{ title: getMessage("lbl.name"), data: "name" }];
```

### 3.2.3 JSP 변환 패턴

```jsp
<%-- AS-IS (하드코딩) --%>
<button type="button">저장</button>
<th>이름</th>

<%-- TO-BE (다국어 적용) --%>
<button type="button"><spring:message code="btn.save"/></button>
<th><spring:message code="lbl.name"/></th>
```

### 3.2.4 MyBatis Mapper 변환 패턴 ✅ 회의 확정 (row 방식)

```xml
<!-- AS-IS -->
<select id="selectComCodeList" resultType="map">
    SELECT code_type, code_id, code_name
    FROM COM_CODE
    WHERE code_type = #{codeType}
</select>

<!-- TO-BE (lang_cd + row 방식) -->
<select id="selectComCodeList" resultType="map">
    SELECT code_type, code_id, code_name
    FROM COM_CODE
    WHERE code_type = #{codeType}
      AND lang_cd = #{lang}
    ORDER BY order_no
</select>
```

---

## 3.3 품질 관리 규칙

### 3.3.1 테스트 방법 ✅ 회의 확정

| 방법 | 설명 |
|------|------|
| **러시아어 모드 테스트** | 러시아어 모드로 전환 후 영어/한글이 보이면 누락된 것 |
| **AI 번역 활용** | 러시아어 AI 번역 일괄 처리 후 테스트 |

### 3.3.2 테스트 체크리스트

> ⚠️ **[협의 필요]** 상세 테스트 체크리스트는 추후 정의

| 항목 | 체크 내용 |
|------|----------|
| **언어 전환** | ko ↔ en ↔ ru 전환 시 모든 텍스트 변경 확인 |
| **누락 확인** | 러시아어 모드에서 영어/한글 텍스트 잔존 여부 |
| **레이아웃** | 영어/러시아어 텍스트로 인한 UI 깨짐 여부 |

---

# Part 4. 작업 범위 및 일정

> "무엇을 얼마나"

## 4.1 일정 ✅ 회의 확정

| 구분 | 기간 | 내용 |
|------|------|------|
| **파일럿 작업** | **12월** | 몇 페이지 시범 작업, 작업 방식 검증 |
| **다국어 작업** | **1월** | 실제 작업 진행 및 **1월 내 완료** 목표 |
| **다국어 검증** | **2월** | 테스트/검증/UI 수정 |
| **타임존** | **3월** | 다국어 완료 후 진행 |

> **목표 마감:** 2월 말까지 다국어 완료
> **주의:** 검증 기간이 작업보다 더 길 수 있음 (숨겨진 레이어 팝업 등)

---

## 4.2 작업 순서 ✅ 회의 확정

```
1. 버전 통합 (UEBA 머지) - 1월 초
2. 메시지 코드 정리 (중복 제거, 키 규칙 적용)
3. DB 테이블/컬럼 작업 (COM_CODE, COM_MENU만)
4. 리스트 추출 (한글 + 영어 하드코딩)
5. 코드 작업 (Properties 통합)
6. 번역 작업 (병렬 진행)
7. 테스트/검증 + UI 수정
```

---

## 4.3 Phase별 작업 상세

### 선행 조건: 버전 통합 (머지)

> **다국어 작업 시작 전 필수 완료 사항** (담당: 별도 지정)

| 작업 | 내용 | 비고 |
|------|------|------|
| **버전 머지** | 기본버전 + UEBA버전 통합 | 2개 버전 코드 병합 |
| **기존 다국어버전 확인** | 납품된 기존 다국어버전 업데이트 내용 확인 | 업데이트된 내용 반영 필요 |
| **키 동기화** | Properties/i18n 키 차이 해소 | 버전 간 차이 확인 |

---

### Phase 1: 인프라 구축

> ⚠️ **[협의 필요]** 상세 구현 방법은 추후 정의

| 작업 | 내용 |
|------|------|
| 1-1 | `COM_USER.lang_cd` 언어 설정 컬럼 추가 |
| 1-2 | Spring LocaleResolver 설정 |
| 1-3 | 로그인 시 Locale 세션 저장 |
| 1-4 | 언어 선택 UI 구현 (로그인 시 선택 + 헤더에서 변경 가능) |

**SQL 예시:**
```sql
ALTER TABLE COM_USER ADD COLUMN lang_cd VARCHAR(5) DEFAULT 'ko' COMMENT '언어코드';
```

---

### Phase 2: Backend 다국어 적용

| 버전 | 항목 수 | 비고 |
|------|---------|------|
| 기본버전 | ~8,000건 | 화면 바인딩 대상 |

---

### Phase 3: Frontend 다국어 적용

| 버전 | JavaScript | JSP | 합계 |
|------|-----------|-----|------|
| 기본버전 | ~20,000건 | ~8,000건 | ~28,000건 |

---

### Phase 4: DB 코드 다국어 적용 ✅ 회의 확정

**대상 테이블 (2개):**

| 테이블명 | 변경 내용 | 데이터 건수 |
|---------|----------|------------|
| `COM_CODE` | `lang_cd` 컬럼 추가 + row 방식 | ~800건 |
| `COM_MENU` | `lang_cd` 컬럼 추가 + row 방식 | ~150건 |

**DDL 스크립트 (row 방식):**

```sql
-- COM_CODE에 lang_cd 컬럼 추가
ALTER TABLE COM_CODE
ADD COLUMN lang_cd VARCHAR(5) DEFAULT 'ko' COMMENT '언어코드(ko/en/ru)';

-- COM_MENU에 lang_cd 컬럼 추가
ALTER TABLE COM_MENU
ADD COLUMN lang_cd VARCHAR(5) DEFAULT 'ko' COMMENT '언어코드(ko/en/ru)';

-- 기존 데이터는 ko로 설정
UPDATE COM_CODE SET lang_cd = 'ko' WHERE lang_cd IS NULL;
UPDATE COM_MENU SET lang_cd = 'ko' WHERE lang_cd IS NULL;
```

**데이터 관리 방식:**
```sql
-- row 방식: 언어별로 데이터 row 추가
-- 기존 (ko)
INSERT INTO COM_CODE (code_type, code_id, code_name, lang_cd) 
VALUES ('STATUS', '01', '정상', 'ko');

-- 영어 추가
INSERT INTO COM_CODE (code_type, code_id, code_name, lang_cd) 
VALUES ('STATUS', '01', 'Normal', 'en');

-- 러시아어 추가
INSERT INTO COM_CODE (code_type, code_id, code_name, lang_cd) 
VALUES ('STATUS', '01', 'Нормальный', 'ru');
```

---

### Phase 5: 번역 작업

**번역 대상:**
- 신규 메시지 영어 번역 (직접)
- 신규 메시지 러시아어 번역 (AI)
- DB 코드성 데이터 번역

**산출 근거:**
```
하드코딩 발생 건수: ~40,000건
   ↓
중복 제거 (동일 텍스트 다수 발생)
예: "저장", "취소", "조회" 등 반복 사용
추정 중복률: 80~90%
   ↓
순수 유니크 메시지: ~4,000건 ~ 5,400건
   ↓
기존 키로 커버 가능: ~500건 (추정)
   ↓
신규 번역 필요: ~3,500건 ~ 4,900건
   + DB 코드 데이터: ~950건
   ─────────────────────────
   총 추정: ~4,450건 ~ 5,850건

※ 정확한 건수는 Phase 2~3 키 추출 후 확정
```

---

### Phase 6: 테스트, 검증 및 UI 레이아웃

| 테스트 항목 | 내용 | 비고 |
|------------|------|------|
| **언어 전환** | ko ↔ en ↔ ru 전환 시 모든 텍스트 정상 표시 | 전 화면 대상 |
| **누락 확인** | 러시아어 모드에서 영어/한글 노출 확인 | 회의 결정 방식 |
| **키 매핑** | 존재하지 않는 키 호출 시 fallback 동작 | 에러 로그 확인 |
| **레이아웃 점검** | 영어/러시아어 텍스트 UI 깨짐 여부 | 주요 화면 중심 |
| **UI 레이아웃 수정** | 중요 항목: 직접 분기, 일반: 동적 처리 | 회의 결정 방식 |
| **기능 테스트** | 다국어 적용 후 기존 기능 정상 동작 | 회귀 테스트 |

---

## 4.4 역할 분담 ✅ 회의 확정

| 역할 | 담당 | 비고 |
|------|------|------|
| **리스트 추출** | 충건 | grep 스크립트 활용 |
| **코드 작업** | 팀별 분담 (SOAR팀, SIM팀 각 1명) | |
| **테스트/검증** | 별도 인원 필요 (QA팀 지원 요청 가능) | |

> ⚠️ **[협의 필요]** 신입 투입 여부, QA팀 지원 요청 여부

---

## 4.5 총 작업량 요약

| Phase | 작업 | 항목 수 | 담당 |
|-------|------|---------|------|
| **선행 조건** | 버전 통합 + 기존 다국어버전 확인 | 2개 버전 머지 | 별도 지정 |
| **Phase 1** | 인프라 구축 | 설정 작업 | 파일럿 후 결정 |
| **Phase 2** | Java 하드코딩 제거 | ~8,000건 | 파일럿 후 결정 |
| **Phase 3** | JS/JSP 하드코딩 제거 | ~28,000건 | 파일럿 후 결정 |
| **Phase 4** | DB 스키마/Mapper 수정 | 2개 테이블 | 파일럿 후 결정 |
| **Phase 5** | 번역 (영어: 직접, 러시아어: AI) | ~4,000~5,000건 | 파일럿 후 결정 |
| **Phase 6** | 테스트/검증/UI 수정 | 전체 화면 | QA/개발팀 |
| **총계** | | **~40,000건 + α** | |

> **담당 결정:** Phase 1~5 담당자는 12월 파일럿 작업 후 결정 (혼자 진행 또는 팀 분담)

---

## 4.6 Phase별 세부 진행 방법

### 4.6.1 키 네이밍 표준 관리 방법

#### 관리 체계

| 항목 | 내용 |
|------|------|
| **표준 문서** | 본 문서 3.1절 (키 네이밍 표준) |
| **관리 도구** | AI 기반 검색/제안 사이트 (개발 예정) |
| **등록 절차** | 신규 키 등록 전 기존 키 검색 → 없으면 등록 |

#### 키 관리 도구 (제안)

> ✅ **회의 확정:** AI 기반 검색/제안 사이트 개발
> - 검색 시 기존 키 있으면 보여주고, 없으면 새 코드 제안
> - 작업용 + 관리용 겸용
> - 개발 서버에 웹 서버 하나 띄워서 운영

> ⚠️ **[협의 필요]** 개발 범위 및 일정

#### 신규 키 등록 절차

```
1. 기존 키 검색 (관리 도구 또는 소스 검색)
   └─ 동일/유사 키 있음 → 기존 키 재사용
   └─ 없음 → 2단계로
   
2. 키 네이밍 규칙에 따라 키 생성
   └─ type.단어.단어 형식 (소문자, 약어 금지)
   
3. 소스 파일에 추가
   └─ Properties 파일 (모든 언어 파일에 동시 추가)
   
4. 코드에서 사용
```

---

### 4.6.2 Phase 2~3: 개발(코드 수정) 진행 방법

#### 작업 목표
하드코딩된 한글 텍스트를 다국어 키로 변환

#### 진행 순서 (파일 단위)

```
1. 하드코딩 한글 추출
   └─ 대상 파일에서 한글 텍스트 목록 작성
   
2. 기존 키 매핑
   └─ 추출된 텍스트가 기존 키로 커버 가능한지 확인
   └─ 매핑 가능 → 해당 키 사용
   └─ 매핑 불가 → 신규 키 생성
   
3. 신규 키 등록 (한국어 우선)
   └─ Properties 파일에 ko 값 추가
   └─ en, ru는 번역 Track에서 처리 (임시로 ko 값 복사)
   
4. 코드 수정 (변수 치환)
   └─ 하드코딩 텍스트 → 다국어 함수 호출로 변경
   
5. 단위 확인
   └─ 해당 화면 접속하여 텍스트 정상 표시 확인
```

#### 영어 하드코딩 처리

> ✅ **회의 확정:** 플레이북 컴포넌트 등에 영어로 하드코딩된 것들 별도 처리 필요
> - 한글 검색으로 찾을 수 없음
> - 러시아어 모드로 전환 후 영어/한글이 보이면 누락된 것

> ⚠️ **[협의 필요]** 한글 모드에서도 영어 유지할 항목 기준

---

### 4.6.3 Phase 4: DB 작업 세부 방법

#### 작업 목표
코드성 테이블(COM_CODE, COM_MENU)에 lang_cd 컬럼 추가 및 row 방식 적용

#### 대상 테이블 (2개만)

| 테이블 | 기존 컬럼 | 변경 내용 | 데이터 건수 |
|--------|----------|----------|------------|
| `COM_CODE` | `code_name` | `lang_cd` 컬럼 추가 | ~800건 |
| `COM_MENU` | `menu_nm` | `lang_cd` 컬럼 추가 | ~150건 |

#### 진행 순서

| 단계 | 작업 | 산출물 |
|------|------|--------|
| 1 | DDL 스크립트 작성 | `i18n_ddl.sql` |
| 2 | 개발DB 적용 및 검증 | 컬럼 추가 확인 |
| 3 | Mapper XML 수정 (lang_cd 조인 방식) | 수정된 Mapper 파일들 |
| 4 | Service/Controller 수정 | lang 파라미터 전달 로직 |
| 5 | 화면 테스트 | 언어별 데이터 표시 확인 |
| 6 | 운영DB 적용 | 배포 스크립트 |

---

### 4.6.4 Phase 5~6: 번역, 테스트 및 UI 레이아웃 통합 방법

#### 번역 작업 (Phase 5)

| 항목 | 내용 |
|------|------|
| **번역 대상** | Phase 2~3에서 등록된 신규 키 + DB 코드 데이터 |
| **영어 번역** | 기존 번역 활용 + 추가 내용 직접 번역 |
| **러시아어 번역** | AI로 일괄 번역 |
| **산출물** | 번역 완료된 Properties, DB 데이터 |

#### 테스트 및 UI 레이아웃 통합 (Phase 6)

**테스트 시나리오:**

```
[시나리오 1: 언어 전환 테스트]
1. 한국어로 로그인
2. 주요 화면 순회하며 텍스트 확인
3. 영어로 전환
4. 동일 화면 순회 - 텍스트 변환 확인
5. 러시아어로 전환
6. 동일 화면 순회 - 텍스트 변환 확인

[시나리오 2: 누락 텍스트 점검 - 회의 결정 방식]
1. 러시아어 모드에서 영어/한글 텍스트 잔존 여부 확인
2. 발견 시 키 등록 및 코드 수정 (즉시)

[시나리오 3: UI 레이아웃 점검]
1. 영어 모드에서 버튼/라벨 잘림 확인
2. 테이블 헤더 텍스트 오버플로우 확인
3. 팝업/모달 레이아웃 깨짐 확인
4. 발견 시 처리:
   - 중요 항목: 직접 분기 처리
   - 일반 항목: 동적 처리 (점점점 + 툴팁)
```

---

## 4.7 품질 관리 및 완료 기준

### 완료 기준 (Definition of Done)

| Phase | 완료 기준 |
|-------|----------|
| **Phase 1** | 언어 전환 시 세션 유지, UI에서 언어 선택 가능 |
| **Phase 2~3** | 대상 파일 하드코딩 한글 0건 (로그/주석 제외) |
| **Phase 4** | COM_CODE, COM_MENU 다국어 적용 완료 |
| **Phase 5** | 신규 키 100% 번역 완료 |
| **Phase 6** | 러시아어 모드에서 영어/한글 노출 0건, UI 깨짐 0건 |

---

# 부록. 의사결정 필요 사항

> 추가 협의가 필요한 항목

## A.1 확정 사항 (회의 결정)

| 항목 | 결정 내용 |
|------|----------|
| **아키텍처** | Properties 단일화 (JS 파일 별도 관리 X) |
| **키 TYPE** | msg, lbl, btn (3종, 소문자) |
| **키 형식** | 소문자, 약어 금지, 단어 그대로 사용 |
| **DB 대상 테이블** | COM_CODE, COM_MENU만 (2개) |
| **DB 방식** | lang_cd 컬럼 + row 방식 |
| **번역 방식** | 영어: 기존 + 직접, 러시아어: AI |
| **UI 처리** | 중요: 직접 분기, 일반: 동적 처리 |
| **일정** | 파일럿 12월, 작업 1월, 검증 2월, 타임존 3월 |
| **테스트 방법** | 러시아어 모드로 영어/한글 노출 확인 |

## A.2 협의 필요 사항

| 항목 | 필요한 결정 | 담당/시기 |
|------|------------|----------|
| **Properties → JS 전달 방식** | backend, frontend를 아우르는 기술 탐색 및 테스트 후 추후 결정 | 충건 / 추후 |
| **랭귀지 테이블 스키마 상세** | row 방식 상세 설계 | 충건 / 12월 내 |
| **작업자 인원** | Phase 1~5 담당자 (혼자 또는 팀 분담) | 파일럿 후 결정 |
| **키 관리 도구** | AI 기반 검색 사이트 개발 범위 | 충건 / 추후 |
| **영어 하드코딩 처리 기준** | 한글 모드에서도 영어 유지할 항목 기준 | SOAR팀 / 리스트 추출 후 |
| **날짜 포맷 다국어화** | 다국어 작업 범위인지 타임존 범위인지 | 팀장 / 추후 |
| **Phase 1 인프라 구축 상세** | LocaleResolver 설정 등 상세 구현 방법 | [협의 필요] |
| **테스트 체크리스트 상세** | 화면별 테스트 항목 정의 | [협의 필요] |

## A.3 리스크 공유

| 리스크 | 영향 | 대응 방안 |
|--------|------|----------|
| 버전 통합 지연 | 다국어 작업 시작 불가 | 버전 머지 일정 사전 확정 |
| 기존 다국어버전 반영 누락 | 이미 작업된 내용 재작업 | 기존 버전 업데이트 내용 확인 |
| 번역 품질 (러시아어 AI) | 사용자 경험 저하 | 네이티브 검수 요청 검토 |
| 일정 지연 | 2월 마감 미달성 | Phase 2~3 병렬화로 단축 |
| UI 레이아웃 미대응 | 텍스트 잘림/깨짐 | Phase 6에서 테스트와 동시 수정 |

---

## 참고 문서

- [다국어 기능 현황 및 개선방향 회의 결과.md](./다국어%20기능%20현황%20및%20개선방향%20회의%20결과.md) - 회의 결과

---

## 버전 이력

| 버전 | 일자 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-17 | 초안 작성 |
| 1.1 | 2025-12-17 | 기본버전/UEBA버전 비교 구조로 개선 |
| 1.2 | 2025-12-18 | 기존 다국어버전 현황 추가 |
| 1.3 | 2025-12-18 | 기본버전 모듈별 다국어 현황 요약 추가 |
| 1.4 | 2025-12-18 | 정합성 검증 및 수치 오류 수정 |
| 1.5 | 2025-12-18 | Phase별 세부 진행 방법 추가, Phase 6에 UI 레이아웃 통합 |
| 2.0 | 2025-12-18 | 회의 결과 반영: Properties 단일화, 키 네이밍(3종/소문자/약어금지), DB(2개 테이블/row방식), 일정 확정 |
| **2.1** | **2025-12-18** | **UEBA버전 섹션 삭제, 키 네이밍 예시에 러시아어 추가, 기존 다국어버전 확인 추가, 담당자 파일럿 후 결정으로 변경** |
